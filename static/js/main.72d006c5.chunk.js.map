{"version":3,"sources":["components/app/app.module.css","components/common/modal/components/modal-overlay/modal-overlay.module.css","components/burger-ingredients/components/ingredient-details/components/nutrition/nutrition.module.css","components/burger-ingredients/components/burger-ingredients-tabs/burger-ingredients-tabs.module.css","components/burger-constructor/components/burger-constructor-order/burger-constructor-order.module.css","components/burger-constructor/components/draggable-burger-constructor-item/draggable-burger-constructor-item.module.css","components/order-feed/order-feed.module.css","components/order-feed-item-status/order-feed-item-status.module.css","components/app-header/components/app-header-item/app-header-item.tsx","reportWebVitals.ts","services/Routes.ts","components/app-header/app-header.tsx","components/common/modal/components/modal-overlay/modal-overlay.tsx","services/cookie.ts","services/cookieTokens.ts","services/utils/log.ts","services/services/ApiService.ts","services/actions/main/index.ts","services/actions/ingredients/index.ts","services/actions/orders/index.ts","services/converters/getBurgerParts.ts","services/hooks/useAppDispatch.ts","components/common/modal/modal.tsx","components/burger-ingredients/components/ingredient-details/components/nutrition/nutrition.tsx","services/hooks/useAppSelector.ts","services/hooks/useIngredientsState.ts","components/burger-ingredients/components/ingredient-details/ingredient-details.tsx","Assets.ts","images/done.png","images/circle64.svg","images/more.png","services/converters/formatOrderNumber.ts","services/hooks/useOrderState.ts","services/hooks/useMainState.ts","components/burger-constructor/components/order-details/order-details.tsx","components/common/protected-route/protected-route.tsx","pages/forgot-password/forgot-password.tsx","pages/login/login.tsx","components/burger-ingredients/components/burger-ingredients-tabs/burger-ingredients-tabs.tsx","components/common/money-counter/money-counter.tsx","components/burger-ingredients/components/burger-ingredients-item/burger-ingredients-item.tsx","components/burger-ingredients/components/burger-ingredients-section/burger-ingredients-section.tsx","components/burger-ingredients/burger-ingredients.tsx","services/model/IConstructorElementData.ts","components/burger-constructor/components/burger-constructor-order/burger-constructor-order.tsx","components/burger-constructor/components/draggable-burger-constructor-item/draggable-burger-constructor-item.tsx","components/loading/loading.tsx","components/burger-constructor/burger-constructor.tsx","components/order-basket/order-basket.tsx","pages/main/main.tsx","pages/page-404/page-404.tsx","components/profile-editor/profile-editor.tsx","components/order-feed-item-status/utils/createStatusText.ts","components/order-feed-item-status/order-feed-item-status.tsx","components/common/order-feed-item-part/order-feed-item-part.tsx","components/order-feed-item-parts/order-feed-item-parts.tsx","services/converters/formatDate.ts","components/order-data/order-data.tsx","components/order-feed-item/order-feed-item.tsx","services/hooks/useOrderFeed.ts","components/order-feed/order-feed.tsx","pages/profile/profile.tsx","pages/register/register.tsx","pages/reset-password/reset-password.tsx","services/model/IOrderFeedItem.ts","components/order-feed-info/order-feed-info.tsx","services/converters/countOrderStatus.ts","pages/order-feed-page/order-feed-page.tsx","components/order-feed-details/components/order-feed-details-part-list/order-feed-details-part-list.tsx","services/converters/countBurgerParts.ts","components/order-feed-details/order-feed-details.tsx","components/common/protected-auth-route/protected-auth-route.tsx","components/app/app.tsx","services/reducers/main/IMainState.ts","services/reducers/main/mainReducer.ts","services/reducers/ingredients/IngredientsState.ts","services/services/IngredientStorage.ts","services/reducers/ingredients/ingredientsReducer.ts","services/reducers/orders/ordersState.ts","services/reducers/orders/ordersReducer.ts","services/reducers/index.ts","services/middleware/socketMiddleWare.ts","services/store.ts","index.tsx","pages/profile/profile.module.css","components/order-feed-details/components/order-feed-details-part-list/order-feed-details-part-list.module.css","components/app-header/app-header.module.css","components/profile-editor/profile-editor.module.css","components/common/order-feed-item-part/order-feed-item-part.module.css","pages/forgot-password/forgot-password.module.css","pages/login/login.module.css","pages/register/register.module.css","pages/reset-password/reset-password.module.css","pages/order-feed-page/order-feed-page.module.css","components/order-feed-details/order-feed-details.module.css","components/common/modal/modal.module.css","components/burger-ingredients/components/ingredient-details/ingredient-details.module.css","pages/main/main.module.css","components/burger-ingredients/components/burger-ingredients-item/burger-ingredients-item.module.css","components/common/money-counter/money-counter.module.css","components/burger-constructor/burger-constructor.module.css","components/loading/loading.module.css","components/order-feed-item/order-feed-item.module.css","components/order-feed-info/order-feed-info.module.css","components/app-header/components/app-header-item/app-header-item.module.css","components/burger-constructor/components/order-details/order-details.module.css","components/burger-ingredients/burger-ingredients.module.css","components/burger-ingredients/components/burger-ingredients-section/burger-ingredients-section.module.css","components/order-feed-item-parts/order-feed-item-parts.module.css"],"names":["module","exports","ICON","MODE","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","AppHeaderItem","text","icon","to","className","styles","item","match","useRouteMatch","path","strict","sensitive","active","isExact","iconType","default","activeClassName","exact","getIcon","getTextClassName","List","type","Person","Burger","Routes","id","AppHeader","header","left","center","link","right","ModalOverlay","onClick","onClickHandler","useCallback","e","stopPropagation","main","setCookie","name","value","props","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","document","cookie","getCookie","matches","RegExp","replace","decodeURIComponent","undefined","deleteCookie","TOKEN_AUTH_PREFIX","TOKEN_AUTH_COOKIE","TOKEN_REFRESH_COOKIE","setTokenAuthCookie","Path","setTokenRefreshCookie","getTokenAuth","getTokenRefresh","deleteTokenCookies","logg","window","isLogAllowed","console","log","isBadToken","message","MainActionType","API","endpoints","a","fetch","this","ingredients","apiResponse","checkResponse","data","selectedIds","tryOrder","responseBody","success","refreshToken","accessToken","Promise","reject","order","warn","fetchPost","registerUser","response","split","catch","restorePassword","method","headers","Authorization","body","JSON","stringify","resetPassword","login","token","logout","result","fetchProfile","fetchPatchProfile","isAuthorized","authToken","userData","mode","cache","credentials","redirect","referrerPolicy","json","orders","totalToday","total","orderFeed","forEach","push","endPoint","ok","IngredientActionType","MAIN_ACTION","dispatch","SET_MODAL_URL","isModal","getState","profileName","profileEmail","profilePassword","email","password","PROFILE_UPDATE_REQUEST","patchProfile","PROFILE_UPDATE_SUCCESS","PROFILE_UPDATE_FAIL","PROFILE_REQUEST","getProfile","PROFILE_SUCCESS","user","PROFILE_FAIL","userResetCode","userResetPassword","RESET_PASS_REQUEST","RESET_PASS_SUCCESS","RESET_PASS_FAIL","RESTORE_PASS_REQUEST","RESTORE_PASS_SUCCESS","RESTORE_PASS_FAIL","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAIL","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAIL","REGISTRATION_USER_REQUEST","REGISTRATION_USER_SUCCESS","REGISTRATION_USER_FAIL","restoreAuth","AUTH_CHECK_END","OrderActionActionType","INGREDIENTS_ACTION","DATA_REQUEST","getBurgerParts","DATA_LOADED","DATA_FAILED","toString","mapApiOrderData","createdAt","_id","number","status","ids","parts","Array","from","Set","removeDuplicates","reduce","acc","nextPart","filter","p","getBurgerPart","mapBurgerParts","sort","ORDERS_ACTION","WS_ORDER_CONNECTION_START","WS_ORDER_CONNECTION_CLOSE","ORDERED_POPUP_SHOW","fetchOrdersFeed","apiOrderFeed","ORDERS_FEED_UPDATE","ingredient","find","i","INGREDIENT_ADD_TO_BASKET","ORDER_REQUEST","state","selectedBun","selectedParts","map","ingredientId","ORDER_SUCCESS","payload","setTimeout","ORDER_MESSAGE_RESET","error","ORDER_FAILED","selectedId1","selectedId2","BASKET_ITEM_SWAP","INGREDIENT_REMOVE_FROM_BASKET","useAppDispatch","useDispatch","KEY_DOWN","Modal","title","children","history","useHistory","locationState","useLocation","backToUrl","backTo","hide","pathname","onKeyDown","key","onWindowClick","useEffect","element","addEventListener","removeEventListener","modalElement","getElementById","ReactDOM","createPortal","head","Nutrition","nutrition","useAppSelector","useSelector","useIngredientsState","IngredientDetails","useParams","selectedIngredient","image_large","carbohydrates","fat","calories","proteins","content","image_wrapper","src","alt","Assets","images","orderDone","partAvatar","partsMore","formatOrderNumber","padStart","useOrderState","useMainState","ICON_URL","OrderDetails","showedOrders","useMemo","done","ProtectedRoute","rest","location","SAVE_AFTER_LOGGING_URL","url","render","ForgotPassword","userRestoreEmail","isRestoreSuccess","onEmailChange","persist","RESTORE_PAGE_CHANGE","target","onSubmit","preventDefault","wrap","label","placeholder","onChange","size","about","Login","loginPageEmail","loginPagePassword","urlAfterLogging","onLoginChange","LOGIN_PAGE_CHANGE","onPasswordChange","BurgerIngredientsTabs","currentTabIndex","tabs","TAB_SELECT","index","parseInt","MoneyCounter","sum","big","digitClass","iconClass","big_icon","BurgerIngredientsItem","part","useDrag","dragRef","ingredientAmountMap","price","image","amount","onItemClick","counter","count","data-cy","ref","BurgerIngredientsSection","section","list","BurgerIngredients","listRef","useRef","ref1","ref2","ref3","handleScroll","ev","listEl","currentTarget","sectionEl1","current","sectionEl2","sectionEl3","listPosition","scrollTop","deltas","Math","abs","offsetTop","clientHeight","nearestIndex","min","length","next","buns","fills","sauces","IConstructorElementType","BurgerConstructorOrder","onOrderButtonClick","BASKET_DRAGGABLE_TYPE","DraggableBurgerConstructorItem","selectedId","collect","monitor","isDragging","useDrop","accept","isHover","isOver","hover","dropRef","opacity","basketItem","style","handleClose","Loading","alert","textClassName","mapBun","bun","suffix","isLocked","BurgerConstructor","isNoSelected","drop","dropTargetRef","TOP","BOTTOM","OrderBasket","orderMessage","isBadOrderMessage","Main","DndProvider","backend","HTML5Backend","col_left","col_right","Page404","ProfileEditor","isProfileSuccess","userEmail","userName","userPassword","profileChanged","onNameChange","PROFILE_PAGE_CHANGE","onResetClick","PROFILE_PAGE_RESET","buttonClass","buttons","hidden","STATUS_TEXTS","STATUS_CLASSNAMES","OrderFeedItemStatus","statusText","getStatusText","statusClassName","getStatusClassname","OrderFeedItemPart","imageUrl","zIndex","overlap","mainClassName","circle","backgroundImage","img","OrderFeedItemParts","maxLength","itemProps","overFlow","isOverFlow","nextZindex","slice","image_mobile","row","TODAY","TODAY_MAX_MS","getMonth","getDate","getFullYear","TODAY_MAX_DATE","OrderData","dateText","str","date","dayDiff","day","toLocaleDateString","dateStyle","time","toLocaleTimeString","hour","minute","timeZoneOffset","floor","getTimezoneOffset","offset","formatDate","OrderFeedItem","withStatus","openUrl","rowName","useOrderFeed","OrderFeed","hasOrders","Profile","onLogoutClick","links","Register","userRegisterEmail","userRegisterName","userRegisterPassword","REGISTRATION_PAGE_CHANGE","ResetPassword","RESET_PAGE_CHANGE","code","onCodeChange","OrderStatus","classNames","columnTitle","processing","totalTitle","totalAmount","OrderFeedInfo","orderTotal","orderToday","orderStatusMap","unknown","created","pending","CREATED","PENDING","DONE","countOrderStatus","columns","OrderFeedPage","colLeft","colRight","OrderFeedDetailsPartList","counted","idParts","Object","values","countBurgerParts","listClassName","scrollable","rowPart","OrderFeedDetails","o","ProtectedAuthRoute","App","isRestoreRequest","isResetRequest","isRegisterRequest","isLoginRequest","isModalUrl","isAuthorizationChecking","showCreatedOrder","isIngredientsRequest","isLoading","InitialMainState","onRegisterPageChange","action","onRestorePageChange","onResetPageChange","onRegisterSuccess","isRegisterSuccess","isRegisterFailed","onLoginSuccess","isLoginSuccess","isLoginFailed","onLoginPageChange","onProfilePageLoad","isProfileRequest","isProfileFail","onProfilePageChange","onProfilePageReset","InitialIngredientsState","isIngredientsFailed","isIngredientsLoaded","IngredientStorage","onDataLoad","save","InitialOrdersFeedState","isOrderRequest","isOrderFailed","isOrderSuccess","onSelectAction","isBun","constructorItem","nanoid","setUniqueSelectorId","thumbnail","updateAmounts","onRemoveAction","amountMap","onBasketItemSwap","results","item1index","findIndex","item2index","resetOrderBasket","onWsOrderGetMessage","getIngredients","successState","wsUrl","wsActions","rootReducer","combineReducers","isLogoutRequest","isLogoutSuccess","isLogoutFailed","isRestoreFailed","isResetFailed","isResetSuccess","TOKEN_REFRESH_REQUEST","TOKEN_REFRESH_SUCCESS","TOKEN_REFRESH_FAIL","isProfileUpdateRequest","isProfileUpdateSuccess","isProfileUpdateFail","AUTH_CHECK_START","ORDER_RESET","wsInit","wsClose","onOpen","WS_ORDER_CONNECTION_SUCCESS","onError","WS_ORDER_CONNECTION_ERROR","onMessage","wsSendMessage","WS_ORDER_SEND_MESSAGE","onClose","WS_ORDER_CONNECTION_CLOSED","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","AppStore","createStore","applyMiddleware","thunk","store","socket","WebSocket","onbeforeunload","onclose","close","onopen","event","onerror","onmessage","parse","send","StrictMode"],"mappings":"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","file":"static/js/main.72d006c5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"app_App__3t73x\",\"content\":\"app_content__1uD0k\",\"col\":\"app_col__BbrOp\",\"col_left\":\"app_col_left__2S36O app_col__BbrOp\",\"col_right\":\"app_col_right__MCd6x app_col__BbrOp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"modal-overlay_main__3eqaR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nutrition\":\"nutrition_nutrition__2lHTg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"burger-ingredients-tabs_main__xVrs6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"burger-constructor-order_main__2PiDo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"basketItem\":\"draggable-burger-constructor-item_basketItem__3HbqG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"order-feed_list__1P-pv\",\"info\":\"order-feed_info__3i_Ik\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-feed-item-status_main__Gj2NK\",\"success\":\"order-feed-item-status_success__1rMBI\"};","import React from 'react';\nimport { BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { NavLink, useRouteMatch } from 'react-router-dom';\nimport styles from './app-header-item.module.css';\nimport PropTypes from 'prop-types';\n\nexport enum ICON {\n  Burger,\n  List,\n  Person\n}\n\nexport enum MODE {\n  active = 'primary',\n  default = 'secondary'\n}\n\n\ninterface IAppHeaderItemProps {\n  text: string;\n  to: string;\n  icon: ICON;\n  active?: boolean;\n}\n\nAppHeaderItem.propTypes = {\n  text: PropTypes.string.isRequired,\n  to: PropTypes.string.isRequired,\n  icon: PropTypes.number.isRequired,\n  active: PropTypes.bool,\n};\n\nexport function AppHeaderItem({ text, icon, to }: IAppHeaderItemProps) {\n  const className = `${styles.item} p-5`;\n  const match = useRouteMatch({\n    path: to,\n    strict: true,\n    sensitive: true,\n  });\n  const active = match != null && match.isExact;\n  const iconType = active ? MODE.active : MODE.default;\n  return (\n    <NavLink to={to} className={className} activeClassName={styles.active} exact={true}>\n      {getIcon(icon, iconType)}\n      <span className={getTextClassName(active)}>{text}</span>\n    </NavLink>\n  );\n}\n\nfunction getTextClassName(active: boolean): string {\n  const className = 'text text_type_main-default ml-2 ';\n  const inActive = 'text_color_inactive';\n  return active ? className : className + inActive;\n}\n\ndeclare type TIconTypes = 'secondary' | 'primary' | 'error' | 'success';\n\nfunction getIcon(icon: ICON, iconType: TIconTypes): JSX.Element {\n  switch (icon) {\n    case ICON.List:\n      return (<ListIcon type={iconType} />);\n    case ICON.Person:\n      return (<ProfileIcon type={iconType} />);\n    case ICON.Burger:\n      return (<BurgerIcon type={iconType} />);\n    default:\n      return (<BurgerIcon type={iconType} />);\n  }\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export const Routes = {\n  main: '/',\n  login: '/login',\n  register: '/register',\n  forgotPassword: '/forgot-password',\n  resetPassword: '/reset-password',\n  profile: '/profile',\n  orderPage: '/order/:id',\n  ingredient: '/ingredients/:id',\n  ingredientLinkCreator: (id: string) => `/ingredients/${id}`,\n  orderPageLinkCreator: (id: string) => `/order/${id}`,\n  profileOrders: '/profile/orders',\n  profileOrdersDetails: '/profile/orders/:id',\n  orderFeed: '/feed',\n  orderFeedDetails: '/feed/:id',\n};\n\nexport interface IOrderDetailsUrlParams {\n  id: string\n}\n\nexport interface LocationState {\n  modalIngredient?: boolean;\n  modalOrder?: boolean;\n  backTo: string;\n}","import { Logo } from '@ya.praktikum/react-developer-burger-ui-components';\nimport React from 'react';\nimport { AppHeaderItem, ICON } from './components/app-header-item/app-header-item';\nimport styles from './app-header.module.css';\nimport { Routes } from '../../services/Routes';\nimport { Link } from 'react-router-dom';\n\nexport function AppHeader() {\n  const className = `${styles.header} mt-4 mb-4`;\n  return (\n    <header>\n      <nav className={className}>\n            <span className={styles.left}>\n                <AppHeaderItem text='Конструктор' icon={ICON.Burger} to={Routes.main} />\n                <AppHeaderItem text='Лента заказов' icon={ICON.List} to={Routes.orderFeed} />\n            </span>\n        <span className={styles.center}>\n          <Link className={styles.link} to={Routes.main}><Logo /></Link>\n            </span>\n        <span className={styles.right}>\n                <AppHeaderItem text='Личный кабинет' icon={ICON.Person} to={Routes.profile} />\n            </span>\n      </nav>\n    </header>\n  );\n}","import React, { SyntheticEvent, useCallback } from 'react';\nimport styles from './modal-overlay.module.css';\nimport PropTypes from 'prop-types';\n\ninterface IModalOverlayProps {\n  onClick: () => void;\n}\n\nModalOverlay.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport function ModalOverlay({ onClick }: IModalOverlayProps) {\n\n  const onClickHandler = useCallback((e: SyntheticEvent) => {\n    e.stopPropagation();\n    onClick();\n  }, [onClick]);\n\n  return (\n    <div onClick={onClickHandler} className={styles.main}>\n    </div>\n  );\n}","interface ICookieProps {\n  expires?: number;\n\n  [key: string]: any;\n}\n\nexport function setCookie(name: string, value: string, props: ICookieProps = {}) {\n  if (props.expires) {\n    const d = new Date();\n    d.setTime(d.getTime() + props.expires * 1000);\n    props.expires = +d.toUTCString();\n  }\n\n  value = encodeURIComponent(value);\n  let updatedCookie = name + '=' + value;\n  for (const propName in props) {\n    updatedCookie += '; ' + propName;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += '=' + propValue;\n    }\n  }\n  document.cookie = updatedCookie;\n}\n\nexport function getCookie(name: string) {\n  const matches = document.cookie.match(\n    new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)'),\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nexport function deleteCookie(name: string) {\n  const expires = new Date(0).toUTCString();\n  document.cookie = `${name}=;expires=${expires}`;\n}","import { deleteCookie, getCookie, setCookie } from './cookie';\n\nconst TOKEN_AUTH_PREFIX = 'Bearer ';\nconst TOKEN_AUTH_COOKIE = 'token';\nconst TOKEN_REFRESH_COOKIE = 'tokenRefresh';\n\nexport function setTokenAuthCookie(value: string) {\n  setCookie(TOKEN_AUTH_COOKIE, value.replace(TOKEN_AUTH_PREFIX, ''), {\n    expires: 20 * 60 * 1000,\n    Path: '/',\n  });\n}\n\nexport function setTokenRefreshCookie(value: string) {\n  setCookie(TOKEN_REFRESH_COOKIE, value, {\n    expires: 365 * 24 * 60 * 60 * 1000,\n    Path: '/',\n  });\n}\n\nexport function getTokenAuth(): string | undefined {\n  const value = getCookie(TOKEN_AUTH_COOKIE);\n  return value != null ? TOKEN_AUTH_PREFIX + value : value;\n}\n\nexport function getTokenRefresh(): string | undefined {\n  return getCookie(TOKEN_REFRESH_COOKIE);\n}\n\nexport function deleteTokenCookies() {\n  deleteCookie(TOKEN_AUTH_COOKIE);\n  deleteCookie(TOKEN_REFRESH_COOKIE);\n}","interface ExtendedWindow {\n  isLogAllowed?: boolean;\n}\n\nexport function logg(...args: any[]) {\n  const { isLogAllowed } = window as ExtendedWindow;\n  if (isLogAllowed === true) console.log(...args);\n}\n\nexport function loggOff() {\n  (window as ExtendedWindow).isLogAllowed = false;\n}\n\nexport function loggOn() {\n  (window as ExtendedWindow).isLogAllowed = true;\n}\n\nloggOn();","import { IBurgerPart } from '../model/IBurgerPart';\nimport {\n  deleteTokenCookies,\n  getTokenAuth,\n  getTokenRefresh,\n  setTokenAuthCookie,\n  setTokenRefreshCookie,\n} from '../cookieTokens';\nimport { IApiOrderFeedItem } from '../model/IOrderFeedItem';\nimport { logg } from '../utils/log';\nimport { IWsOrderMessage } from '../actions';\n\n\nexport class ApiService {\n  constructor(private readonly endpoints: IApiEndpoints) {\n  }\n\n  async getBurgerParts(): Promise<IngredientsResponse> {\n    return fetch(this.endpoints.ingredients)\n      .then(apiResponse => this.checkResponse<IApiIngredientsResponse>(apiResponse))\n      .then((data: IApiIngredientsResponse) => ({\n        ingredients: data.data,\n      }));\n  }\n\n  async order(selectedIds: string[]): Promise<IApiOrderResult> {\n    const data: IApiOrderConfig = {\n      ingredients: selectedIds,\n    };\n    try {\n      let responseBody = await this.tryOrder(data);\n      if (!responseBody.success) {\n        const { message } = responseBody;\n        logg('order responseBody not success', message);\n        if (isBadToken(message)) {\n          logg('order invalid token');\n          const { accessToken } = await this.refreshToken();\n          if (accessToken) {\n            logg('order token refreshed ', accessToken);\n            responseBody = await this.tryOrder(data);\n          } else return Promise.reject('can`t order token refreshed');\n        } else return Promise.reject(message);\n      }\n      return responseBody.order;\n    } catch (e) {\n      console.warn(e);\n      return Promise.reject(e);\n    }\n  }\n\n  async registerUser(data: IApiRegisterUserData): Promise<IApiRegisterUserResponse> {\n    return this\n      .fetchPost<IApiRegisterUserData, IApiRegisterUserResponse>(this.endpoints.registerUser, data)\n      .then(response => {\n        const { accessToken, refreshToken } = response;\n        setTokenAuthCookie(accessToken.split(' ')[1]);\n        setTokenRefreshCookie(refreshToken);\n        return response;\n      })\n      .catch(e => {\n        console.warn(e);\n        return Promise.reject(e);\n      });\n  }\n\n  async restorePassword(data: IApiRestorePasswordData): Promise<IApiRestorePasswordResponse> {\n    return fetch(this.endpoints.restorePassword, {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json',\n        Authorization: getTokenAuth() ?? '',\n      },\n      body: JSON.stringify(data),\n    }).then(apiResponse => this.checkResponse<IApiRestorePasswordResponse>(apiResponse));\n  }\n\n  async resetPassword(data: IApiResetPasswordData): Promise<IApiResetPasswordResponse> {\n    return this\n      .fetchPost<IApiResetPasswordData, IApiResetPasswordResponse>(this.endpoints.resetPassword, data);\n  }\n\n  async login(data: IApiLoginData): Promise<IApiLoginResponse> {\n    return this.fetchPost<IApiLoginData, IApiLoginResponse>(this.endpoints.login, data)\n      .then(response => {\n        const { accessToken, refreshToken } = response;\n        setTokenAuthCookie(accessToken.split(' ')[1]);\n        setTokenRefreshCookie(refreshToken);\n        return response;\n      })\n      .catch(e => {\n        console.warn(e);\n        return Promise.reject(e);\n      });\n  }\n\n  async logout(): Promise<IApiLogoutResponse> {\n    const data: IApiLogoutData = {\n      token: getTokenRefresh() ?? '',\n    };\n    deleteTokenCookies();\n    return this.fetchPost<IApiLogoutData, IApiLogoutResponse>(this.endpoints.logout, data);\n  }\n\n  async refreshToken(): Promise<IApiTokenResponse> {\n    const refreshToken = getTokenRefresh();\n    if (refreshToken == null) return Promise.reject('no refresh token');\n    return this.fetchPost<IApiTokenData, IApiTokenResponse>(this.endpoints.token, { token: refreshToken })\n      .then(result => {\n        setTokenAuthCookie(result.accessToken);\n        setTokenRefreshCookie(result.refreshToken);\n        return result;\n      });\n  }\n\n  async getProfile(): Promise<IApiUserProfileResponse> {\n    try {\n      let responseBody = await this.fetchProfile();\n      if (!responseBody.success) {\n        const { message } = responseBody;\n        logg('responseBody not success', message);\n        if (isBadToken(message)) {\n          logg('invalid token');\n          const { accessToken } = await this.refreshToken();\n          if (accessToken) {\n            logg('token refreshed ', accessToken);\n            responseBody = await this.fetchProfile();\n          }\n        } else return Promise.reject(message);\n      }\n      return responseBody;\n    } catch (e) {\n      console.warn(e);\n      return Promise.reject(e);\n    }\n  }\n\n  async patchProfile(data: IApiUserProfilePatchData): Promise<IApiUserProfileResponse> {\n    try {\n      let responseBody = await this.fetchPatchProfile(data);\n      if (!responseBody.success) {\n        const { message } = responseBody;\n        logg('responseBody not success', message);\n        if (isBadToken(message)) {\n          logg('invalid token');\n          const { accessToken } = await this.refreshToken();\n          if (accessToken) {\n            logg('token refreshed ', accessToken);\n            responseBody = await this.fetchPatchProfile(data);\n          }\n        } else return Promise.reject(message);\n      }\n      return responseBody;\n    } catch (e) {\n      console.warn(e);\n      return Promise.reject(e);\n    }\n  }\n\n  async restoreAuth(): Promise<IApiAuthCheckResult> {\n    let isAuthorized = false;\n    try {\n      const refreshToken = getTokenRefresh();\n      const authToken = getTokenAuth();\n\n      isAuthorized = refreshToken != null && authToken != null;\n\n      logg('refreshToken ', refreshToken);\n      logg('authToken ', authToken);\n\n      if (refreshToken && authToken == null) {\n        logg('try to refresh access token');\n        await this.refreshToken();\n        isAuthorized = true;\n      }\n    } catch (e) {\n      console.warn(e);\n      deleteTokenCookies();\n    }\n    return {\n      isAuthorized,\n    };\n  }\n\n  private async fetchProfile(): Promise<IApiUserProfileResponse> {\n    try {\n      const apiResponse = await fetch(this.endpoints.userData, {\n        method: 'GET',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n          'Content-type': 'application/json',\n          Authorization: getTokenAuth() ?? '',\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n      });\n      logg('fetchProfile apiResponse', apiResponse);\n      const responseBody = await apiResponse.json();\n      logg('fetchProfile response body', responseBody);\n      return responseBody;\n    } catch (e) {\n      console.warn(e);\n      return Promise.reject(e);\n    }\n  }\n\n  private async tryOrder(data: IApiOrderConfig): Promise<IApiUserOrderResponse> {\n    try {\n      const apiResponse = await fetch(this.endpoints.order, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': getTokenAuth() ?? '',\n        },\n        body: JSON.stringify(data),\n      });\n      return await apiResponse.json();\n    } catch (e) {\n      console.warn(e);\n      return Promise.reject(e);\n    }\n  }\n\n\n  async fetchOrdersFeed(): Promise<IWsOrderMessage> {\n    const orders: IApiOrderFeedItem[] = [];\n    let totalToday = 0;\n    let total = 0;\n    let success = false;\n    try {\n      const apiResponse = await fetch(this.endpoints.orderFeed);\n      const data: IApiOrderFetchResponse = await apiResponse.json();\n      if (data.success && data.orders) {\n        data.orders.forEach(order => orders.push(order));\n        totalToday = data.totalToday;\n        total = data.total;\n        success = true;\n      }\n    } catch (e) {\n      console.warn(e);\n      return Promise.reject(e);\n    }\n    return {\n      success,\n      orders,\n      totalToday,\n      total\n    };\n  }\n\n  private async fetchPatchProfile(data: IApiUserProfilePatchData): Promise<IApiUserProfileResponse> {\n    return fetch(this.endpoints.userData, {\n      method: 'PATCH',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-type': 'application/json',\n        Authorization: getTokenAuth() ?? '',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify(data),\n    }).then(apiResponse => {\n      logg('patchProfile ', apiResponse);\n      return apiResponse.json();\n    });\n  }\n\n  private async fetchPost<Data, Response extends IApiResponse>(endPoint: string, data: Data): Promise<Response> {\n    return fetch(endPoint, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': getTokenAuth() ?? '',\n      },\n      body: JSON.stringify(data),\n    })\n      .then(apiResponse => this.checkResponse(apiResponse));\n  }\n\n  private async checkResponse<T extends IApiResponse>(apiResponse: Response): Promise<T> {\n    if (!apiResponse.ok) {\n      return Promise.reject('apiResponse not ok');\n    }\n\n    return apiResponse.json()\n      .then((data: T) => {\n        if (data.success) return data;\n        else return Promise.reject('apiResponse data is not success');\n      });\n  }\n}\n\nfunction isBadToken(message: string | undefined) {\n  return message === 'invalid token'\n    || message === 'jwt expired';\n}\n\n\nexport interface IApiEndpoints extends Record<string, string> {\n  ingredients: string;\n  order: string;\n  registerUser: string;\n  restorePassword: string;\n  resetPassword: string;\n  login: string;\n  logout: string;\n  token: string;\n  userData: string;\n  orderFeed: string;\n}\n\nexport interface IApiResponse {\n  success?: boolean;\n}\n\nexport interface IApiIngredientsResponse {\n  success: boolean;\n  data: IBurgerPart[];\n}\n\nexport interface IngredientsResponse {\n  ingredients: IBurgerPart[];\n}\n\nexport interface IApiOrderConfig {\n  ingredients: string[]; // ingredients ids\n}\n\nexport interface IApiOrderResponse {\n  name: string; // \"Краторный метеоритный бургер\",\n  order: IApiOrderFeedItem;\n  success: boolean;\n}\n\nexport interface IApiOrderResult extends IApiOrderFeedItem {\n}\n\nexport interface IApiRegisterUserData {\n  email: string;\n  password: string;\n  name: string;\n}\n\nexport interface IApiRegisterUserResponse {\n  success: boolean;\n  user: {\n    email: string;\n    name: string;\n  };\n  accessToken: string; // \"Bearer ...\",\n  refreshToken: string;\n}\n\nexport interface IApiTokenData {\n  token: string; // {{refreshToken}}\n}\n\nexport interface IApiGetProfileData {\n  authorization: string; // token\n}\n\nexport interface IApiTokenResponse {\n  success: boolean;\n  accessToken: string; // \"Bearer ...\",\n  refreshToken: string;\n}\n\nexport interface IApiUserProfileResponse {\n  success: boolean;\n  message?: string;\n  user: {\n    name: string;\n    email: string;\n  };\n}\n\nexport interface IApiUserOrderResponse {\n  success: boolean;\n  message?: string;\n  order: IApiOrderFeedItem;\n}\n\nexport interface IApiUserProfilePatchData {\n  email: string;\n  password: string;\n  name: string;\n}\n\nexport interface IApiRestorePasswordData {\n  email: string;\n}\n\nexport interface IApiRestorePasswordResponse {\n  success: boolean;\n  message: string; // \"Reset email sent\"\n}\n\n\nexport interface IApiResetPasswordData {\n  password: string;\n  token: string;\n}\n\nexport interface IApiResetPasswordResponse {\n  success: boolean;\n  message: string; // \"Password successfully reset\"\n}\n\nexport interface IApiLoginData {\n  email: string;\n  password: string;\n}\n\n\nexport interface IApiProfileData {\n  email: string;\n  password: string;\n  name: string;\n}\n\n\nexport interface IApiLoginResponse {\n  success: boolean;\n  accessToken: string;\n  refreshToken: string;\n  user: {\n    email: string;\n    name: string;\n  };\n  message: string; // \"Password successfully reset\"\n}\n\n\nexport interface IApiLogoutData {\n  token: string;\n}\n\nexport interface IApiLogoutResponse {\n  success: boolean;\n  message: string; // \"Successful logout\"\n}\n\nexport interface IApiAuthCheckResult {\n  isAuthorized: boolean;\n}\n\nexport interface IApiOrderFetchResponse {\n  orders: IApiOrderFeedItem[];\n  success: boolean;\n  total: number;\n  totalToday: number;\n}\n\nconst END_POINTS: IApiEndpoints = {\n  ingredients: 'https://norma.nomoreparties.space/api/ingredients',\n  order: 'https://norma.nomoreparties.space/api/orders',\n  login: 'https://norma.nomoreparties.space/api/auth/login',\n  logout: 'https://norma.nomoreparties.space/api/auth/logout',\n  token: 'https://norma.nomoreparties.space/api/auth/token',\n  registerUser: 'https://norma.nomoreparties.space/api/auth/register',\n  restorePassword: 'https://norma.nomoreparties.space/api/password-reset',\n  resetPassword: 'https://norma.nomoreparties.space/api/password-reset/reset',\n  userData: 'https://norma.nomoreparties.space/api/auth/user',\n  orderFeed: 'https://norma.nomoreparties.space/api/orders/all',\n};\nexport const API = new ApiService(END_POINTS);\n","import { IGetState } from '../../store';\nimport {\n  API,\n  IApiAuthCheckResult,\n  IApiLoginData,\n  IApiLoginResponse,\n  IApiLogoutResponse,\n  IApiProfileData,\n  IApiRegisterUserData,\n  IApiRegisterUserResponse,\n  IApiResetPasswordData,\n  IApiRestorePasswordData,\n  IApiTokenData,\n  IApiTokenResponse,\n} from '../../services/ApiService';\n\nexport type MainAction =\n  | { type: MainActionType.TAB_SELECT, index: number }\n  | { type: MainActionType.REGISTRATION_PAGE_CHANGE, data: IApiRegisterUserData }\n  | { type: MainActionType.REGISTRATION_USER_REQUEST, data: IApiRegisterUserData }\n  | { type: MainActionType.REGISTRATION_USER_SUCCESS, data: IApiRegisterUserResponse, password: string }\n  | { type: MainActionType.REGISTRATION_USER_FAIL }\n  | { type: MainActionType.RESTORE_PAGE_CHANGE, email: string }\n  | { type: MainActionType.RESTORE_PASS_REQUEST, data: IApiRestorePasswordData }\n  | { type: MainActionType.RESTORE_PASS_SUCCESS }\n  | { type: MainActionType.RESTORE_PASS_FAIL }\n  | { type: MainActionType.RESET_PAGE_CHANGE, code: string, password: string }\n  | { type: MainActionType.RESET_PASS_REQUEST }\n  | { type: MainActionType.RESET_PASS_SUCCESS }\n  | { type: MainActionType.RESET_PASS_FAIL }\n  | { type: MainActionType.LOGIN_PAGE_CHANGE, data: IApiLoginData }\n  | { type: MainActionType.LOGIN_REQUEST, data: IApiLoginData }\n  | { type: MainActionType.LOGIN_SUCCESS, data: IApiLoginResponse, password: string }\n  | { type: MainActionType.LOGIN_FAIL }\n  | { type: MainActionType.LOGOUT_REQUEST }\n  | { type: MainActionType.LOGOUT_SUCCESS, data: IApiLogoutResponse }\n  | { type: MainActionType.LOGOUT_FAIL }\n  | { type: MainActionType.TOKEN_REFRESH_REQUEST, data: IApiTokenData }\n  | { type: MainActionType.TOKEN_REFRESH_SUCCESS, data: IApiTokenResponse }\n  | { type: MainActionType.TOKEN_REFRESH_FAIL }\n  | { type: MainActionType.PROFILE_REQUEST }\n  | { type: MainActionType.PROFILE_SUCCESS, data: IApiProfileData }\n  | { type: MainActionType.PROFILE_FAIL }\n  | { type: MainActionType.PROFILE_PAGE_CHANGE, data: IApiProfileData }\n  | { type: MainActionType.PROFILE_PAGE_RESET }\n  | { type: MainActionType.PROFILE_UPDATE_REQUEST, data: IApiProfileData }\n  | { type: MainActionType.PROFILE_UPDATE_SUCCESS, data: IApiProfileData }\n  | { type: MainActionType.PROFILE_UPDATE_FAIL }\n  | { type: MainActionType.SAVE_AFTER_LOGGING_URL, url: string }\n  | { type: MainActionType.SET_MODAL_URL, isModal: boolean }\n  | { type: MainActionType.AUTH_CHECK_START }\n  | { type: MainActionType.AUTH_CHECK_END, data: IApiAuthCheckResult }\n\n\ntype IMainDispatch = (action: MainAction) => any;\n\nexport enum MainActionType {\n\n\n  TAB_SELECT = 'TAB_SELECT',\n\n  REGISTRATION_PAGE_CHANGE = 'REGISTRATION_PAGE_CHANGE',\n  REGISTRATION_USER_REQUEST = 'REGISTRATION_USER_REQUEST',\n  REGISTRATION_USER_SUCCESS = 'REGISTRATION_USER_SUCCESS',\n  REGISTRATION_USER_FAIL = 'REGISTRATION_USER_FAIL',\n\n  RESTORE_PAGE_CHANGE = 'RESTORE_PAGE_CHANGE',\n  RESTORE_PASS_REQUEST = 'RESTORE_PASS_REQUEST',\n  RESTORE_PASS_SUCCESS = 'RESTORE_PASS_SUCCESS',\n  RESTORE_PASS_FAIL = 'RESTORE_PASS_FAIL',\n\n  RESET_PAGE_CHANGE = 'RESET_PAGE_CHANGE',\n  RESET_PASS_REQUEST = 'RESET_PASS_REQUEST',\n  RESET_PASS_SUCCESS = 'RESET_PASS_SUCCESS',\n  RESET_PASS_FAIL = 'RESET_PASS_FAIL',\n\n  LOGIN_PAGE_CHANGE = 'LOGIN_PAGE_CHANGE',\n  LOGIN_REQUEST = 'LOGIN_REQUEST',\n  LOGIN_SUCCESS = 'LOGIN_SUCCESS',\n  LOGIN_FAIL = 'LOGIN_FAIL',\n\n  LOGOUT_REQUEST = 'LOGOUT_REQUEST',\n  LOGOUT_SUCCESS = 'LOGOUT_SUCCESS',\n  LOGOUT_FAIL = 'LOGOUT_FAIL',\n\n  TOKEN_REFRESH_REQUEST = 'TOKEN_REFRESH_REQUEST',\n  TOKEN_REFRESH_SUCCESS = 'TOKEN_REFRESH_SUCCESS',\n  TOKEN_REFRESH_FAIL = 'TOKEN_REFRESH_FAIL',\n\n  PROFILE_REQUEST = 'PROFILE_REQUEST',\n  PROFILE_SUCCESS = 'PROFILE_SUCCESS',\n  PROFILE_FAIL = 'PROFILE_FAIL',\n\n  PROFILE_PAGE_CHANGE = 'PROFILE_PAGE_CHANGE',\n  PROFILE_PAGE_RESET = 'PROFILE_PAGE_RESET',\n\n  PROFILE_UPDATE_REQUEST = 'PROFILE_UPDATE_REQUEST',\n  PROFILE_UPDATE_SUCCESS = 'PROFILE_UPDATE_SUCCESS',\n  PROFILE_UPDATE_FAIL = 'PROFILE_UPDATE_FAIL',\n\n  SAVE_AFTER_LOGGING_URL = 'SAVE_AFTER_LOGGING_URL',\n  AUTH_CHECK_START = 'AUTH_CHECK_START',\n  AUTH_CHECK_END = 'AUTH_CHECK_END',\n\n  SET_MODAL_URL = 'SET_MODAL_URL',\n}\n\n\nexport interface IAuthCheckStartData {\n  selectedId: string,\n  ingredientId: string\n}\n\n\nconst registerActionCreator = (data: IApiRegisterUserData) => async (dispatch: IMainDispatch) => {\n  dispatch({ type: MainActionType.REGISTRATION_USER_REQUEST, data });\n\n  API.registerUser(data)\n    .then((response) =>\n      dispatch({ type: MainActionType.REGISTRATION_USER_SUCCESS, data: response, password: data.password }))\n    .catch(() => dispatch({ type: MainActionType.REGISTRATION_USER_FAIL }));\n};\n\nconst login = (data: IApiLoginData) => async (dispatch: IMainDispatch) => {\n  dispatch({ type: MainActionType.LOGIN_REQUEST, data });\n\n  API.login(data)\n    .then((response) => {\n      dispatch({ type: MainActionType.LOGIN_SUCCESS, data: response, password: data.password });\n    }).catch(() => dispatch({ type: MainActionType.LOGIN_FAIL }));\n};\n\nconst logout = () => async (dispatch: IMainDispatch) => {\n  dispatch({ type: MainActionType.LOGOUT_REQUEST });\n  API.logout()\n    .then((response) => dispatch({ type: MainActionType.LOGOUT_SUCCESS, data: response }))\n    .catch(() => dispatch({ type: MainActionType.LOGOUT_FAIL }));\n};\n\nconst restorePassActionCreator = (data: IApiRestorePasswordData) =>\n  async (dispatch: IMainDispatch) => {\n    dispatch({ type: MainActionType.RESTORE_PASS_REQUEST, data });\n    API.restorePassword(data)\n      .then(() => dispatch({ type: MainActionType.RESTORE_PASS_SUCCESS }))\n      .catch(() => dispatch({ type: MainActionType.RESTORE_PASS_FAIL }));\n  };\n\nconst resetPassActionCreator = () =>\n  async (dispatch: IMainDispatch, getState: IGetState) => {\n    const { userResetCode: token = '', userResetPassword: password = '' } = getState().main;\n    const data: IApiResetPasswordData = {\n      password, token,\n    };\n\n    dispatch({ type: MainActionType.RESET_PASS_REQUEST });\n\n    API.resetPassword(data)\n      .then(() => dispatch({ type: MainActionType.RESET_PASS_SUCCESS }))\n      .catch(() => dispatch({ type: MainActionType.RESET_PASS_FAIL }));\n  };\n\nconst requestProfileActionCreator = () =>\n  async (dispatch: IMainDispatch) => {\n    dispatch({ type: MainActionType.PROFILE_REQUEST });\n    API.getProfile()\n      .then((response) => {\n          dispatch({ type: MainActionType.PROFILE_SUCCESS, data: { ...response.user, password: '' } });\n        },\n      )\n      .catch(() => dispatch({ type: MainActionType.PROFILE_FAIL }));\n  };\n\nconst updateProfileActionCreator = () =>\n  async (dispatch: IMainDispatch, getState: IGetState) => {\n    const { profileName = '', profileEmail = '', profilePassword = '' } = getState().main;\n    const data = {\n      name: profileName,\n      email: profileEmail,\n      password: profilePassword,\n    };\n    dispatch({ type: MainActionType.PROFILE_UPDATE_REQUEST, data });\n    API.patchProfile(data)\n      .then(() => {\n          dispatch({ type: MainActionType.PROFILE_UPDATE_SUCCESS, data });\n        },\n      )\n      .catch((e) => {\n        console.warn(e);\n        dispatch({ type: MainActionType.PROFILE_UPDATE_FAIL });\n      });\n  };\n\nconst setModalUrlOn = () =>\n  async (dispatch: IMainDispatch) => {\n    dispatch({ type: MainActionType.SET_MODAL_URL, isModal: true });\n  };\n\nconst setModalUrlOff = () =>\n  async (dispatch: IMainDispatch) => {\n    dispatch({ type: MainActionType.SET_MODAL_URL, isModal: false });\n  };\n\nconst restoreAuth = () => async (dispatch: IMainDispatch) => {\n  const { isAuthorized } = await API.restoreAuth();\n  dispatch({ type: MainActionType.AUTH_CHECK_END, data: { isAuthorized } });\n};\n\n\nexport const MAIN_ACTION = {\n  setModalUrlOff,\n  setModalUrlOn,\n  updateProfileActionCreator,\n  requestProfileActionCreator,\n  resetPassActionCreator,\n  restorePassActionCreator,\n  logout,\n  login,\n  registerActionCreator,\n  restoreAuth\n};","import { IBurgerPart } from '../../model/IBurgerPart';\nimport { API } from '../../services/ApiService';\nimport { logg } from '../../utils/log';\n\nexport enum IngredientActionType {\n  DATA_REQUEST = 'DATA_REQUEST',\n  DATA_LOADED = 'DATA_LOADED',\n  DATA_FAILED = 'DATA_FAILED'\n}\n\ntype IngredientDispatch = (action: IngredientAction) => any;\n\nconst initData = () => async (dispatch: IngredientDispatch) => {\n  dispatch({ type: IngredientActionType.DATA_REQUEST });\n\n  try {\n    const { ingredients } = await API.getBurgerParts();\n    logg('ingredients', ingredients);\n    dispatch({ type: IngredientActionType.DATA_LOADED, ingredients });\n  } catch (e: any) {\n    dispatch({ type: IngredientActionType.DATA_FAILED, message: e.toString() });\n  }\n};\n\nexport const INGREDIENTS_ACTION = {\n  initData,\n};\n\nexport type IngredientAction =\n  | { type: IngredientActionType.DATA_REQUEST }\n  | { type: IngredientActionType.DATA_LOADED, ingredients: IBurgerPart[] }\n  | { type: IngredientActionType.DATA_FAILED, message: string }\n","import { IBurgerPart } from '../../model/IBurgerPart';\nimport { IApiOrderFeedItem, IOrderFeedItem } from '../../model/IOrderFeedItem';\nimport { IGetState } from '../../store';\nimport { API } from '../../services/ApiService';\nimport { mapApiOrderData } from '../../converters/getBurgerParts';\nimport { getTokenAuth } from '../../cookieTokens';\nimport { logg } from '../../utils/log';\n\nexport type OrderAction =\n  | { type: OrderActionActionType.INGREDIENT_ADD_TO_BASKET, ingredient: IBurgerPart }\n  | { type: OrderActionActionType.INGREDIENT_REMOVE_FROM_BASKET, payload: IRemovePayLoad }\n  | { type: OrderActionActionType.ORDER_RESET }\n  | { type: OrderActionActionType.ORDER_REQUEST }\n  | { type: OrderActionActionType.ORDER_SUCCESS, payload: IOrderPayLoad }\n  | { type: OrderActionActionType.ORDER_FAILED }\n  | { type: OrderActionActionType.ORDER_MESSAGE_RESET }\n  | { type: OrderActionActionType.WS_ORDER_CONNECTION_START, token: string }\n  | { type: OrderActionActionType.WS_ORDER_CONNECTION_SUCCESS }\n  | { type: OrderActionActionType.WS_ORDER_CONNECTION_CLOSE }\n  | { type: OrderActionActionType.WS_ORDER_CONNECTION_CLOSED, event: any }\n  | { type: OrderActionActionType.WS_ORDER_CONNECTION_ERROR, error: any }\n  | { type: OrderActionActionType.ORDERS_FEED_UPDATE, message: IWsOrderMessage }\n  | { type: OrderActionActionType.WS_ORDER_SEND_MESSAGE, message: any }\n  | { type: OrderActionActionType.ORDERED_POPUP_SHOW, order: IOrderFeedItem }\n  | { type: OrderActionActionType.BASKET_ITEM_SWAP, selectedId1: string, selectedId2: string }\n\n\nexport interface IOrderPayLoad extends IOrderFeedItem {\n}\n\n\nexport interface IWsOrderMessage {\n  success?: boolean;\n  total: number;\n  totalToday: number;\n  orders: IApiOrderFeedItem[];\n}\n\n\nexport interface IRemovePayLoad {\n  selectedId: string,\n  ingredientId: string\n}\n\nexport enum OrderActionActionType {\n  INGREDIENT_ADD_TO_BASKET = 'INGREDIENT_ADD_TO_BASKET',\n  INGREDIENT_REMOVE_FROM_BASKET = 'INGREDIENT_REMOVE_FROM_BASKET',\n\n  BASKET_ITEM_SWAP = 'BASKET_ITEM_SWAP',\n\n  ORDER_RESET = 'ORDER_RESET',\n  ORDER_REQUEST = 'ORDER_REQUEST',\n  ORDER_SUCCESS = 'ORDER_SUCCESS',\n  ORDER_FAILED = 'ORDER_FAILED',\n  ORDER_MESSAGE_RESET = 'ORDER_MESSAGE_RESET',\n\n  WS_ORDER_CONNECTION_SUCCESS = 'WS_ORDER_CONNECTION_SUCCESS',\n  WS_ORDER_CONNECTION_START = 'WS_ORDER_CONNECTION_START',\n  WS_ORDER_CONNECTION_ERROR = 'WS_ORDER_CONNECTION_ERROR',\n  WS_ORDER_CONNECTION_CLOSED = 'WS_ORDER_CONNECTION_CLOSED',\n  WS_ORDER_CONNECTION_CLOSE = 'WS_ORDER_CONNECTION_CLOSE',\n  ORDERS_FEED_UPDATE = 'ORDERS_FEED_UPDATE',\n  WS_ORDER_SEND_MESSAGE = 'WS_ORDER_SEND_MESSAGE',\n\n  // отправить при открытии окна с информацией о полученном заказе\n  ORDERED_POPUP_SHOW = 'ORDERED_POPUP_SHOW',\n\n}\n\ntype OrderDispatch = (action: OrderAction) => any;\n\n\nconst updateOrderFeedFromHttp = () =>\n  async (dispatch: OrderDispatch, getState: IGetState) => {\n    try {\n      const apiOrderFeed = await API.fetchOrdersFeed();\n      console.log('updateOrderFeedFromHttp', apiOrderFeed)\n      const { ingredients } = getState().ingredients;\n      const { total, totalToday, orders } = apiOrderFeed;\n      dispatch({\n        type: OrderActionActionType.ORDERS_FEED_UPDATE,\n        message: {\n          orders,\n          total,\n          totalToday,\n        },\n      });\n    } catch (e) {\n      console.warn(e);\n    }\n  };\n\nconst closeSocket = () => async (dispatch: OrderDispatch) => {\n  dispatch({ type: OrderActionActionType.WS_ORDER_CONNECTION_CLOSE });\n};\n\nconst onIngredientDropActionCreator = (id: string) => (dispatch: OrderDispatch, getState: IGetState) => {\n  const { ingredients } = getState().ingredients;\n  const ingredient = ingredients.find(i => i._id === id);\n  if (ingredient) {\n    dispatch({ type: OrderActionActionType.INGREDIENT_ADD_TO_BASKET, ingredient });\n  }\n};\n\nconst orderAuthorizedActionCreator = () => async (dispatch: OrderDispatch, getState: IGetState) => {\n  dispatch({ type: OrderActionActionType.ORDER_REQUEST });\n  const state = getState().orders;\n\n  const { ingredients } = getState().ingredients;\n\n  const selectedBun = state.selectedBun;\n  const selectedIds = state.selectedParts.map(i => i.ingredientId);\n  if (selectedBun) {\n    selectedIds.push(selectedBun.ingredientId);\n    selectedIds.push(selectedBun.ingredientId);\n  }\n\n  // order срабатывает с сильным запозданием, поэтому перевесим SUCCESS на проверку через сокеты\n  API.order(selectedIds)\n    .then(result => {\n      dispatch({ type: OrderActionActionType.ORDER_SUCCESS, payload: mapApiOrderData(result, ingredients) });\n      setTimeout(() => {\n        dispatch({ type: OrderActionActionType.ORDER_MESSAGE_RESET });\n      }, 1500);\n    })\n    .catch(e => {\n      console.error(e);\n      dispatch({ type: OrderActionActionType.ORDER_FAILED });\n      setTimeout(() => {\n        dispatch({ type: OrderActionActionType.ORDER_MESSAGE_RESET });\n      }, 1500);\n    });\n};\n\n\nconst initOrderFeedSocket = () => async (dispatch: OrderDispatch) => {\n  const token = getTokenAuth();\n  if (token) {\n    dispatch({ type: OrderActionActionType.WS_ORDER_CONNECTION_START, token });\n    logg('initOrderFeedSocket', token);\n  }\n};\n\nconst showOrderPopup = (order: IOrderFeedItem) => async (dispatch: OrderDispatch) => {\n  dispatch({ type: OrderActionActionType.ORDERED_POPUP_SHOW, order });\n};\n\n\nexport const ORDERS_ACTION = {\n  initOrderFeedSocket,\n  closeSocket,\n  showOrderPopup,\n  updateOrderFeedFromHttp,\n  onIngredientDropActionCreator,\n  orderAuthorizedActionCreator,\n  swapBasketItem: (selectedId1: string, selectedId2: string) => ({\n    type: OrderActionActionType.BASKET_ITEM_SWAP,\n    selectedId1,\n    selectedId2,\n  }),\n  removeFromBasket: (payload: IRemovePayLoad) => ({\n    type: OrderActionActionType.INGREDIENT_REMOVE_FROM_BASKET,\n    payload,\n  }),\n};","import { IBurgerPart } from '../model/IBurgerPart';\nimport { IApiOrderFeedItem, IOrderFeedItem } from '../model/IOrderFeedItem';\n\n\nexport function mapApiOrderData(data: IApiOrderFeedItem, ingredients: IBurgerPart[]): IOrderFeedItem {\n  return {\n    createdAt: data.createdAt,\n    id: data._id,\n    name: data.name,\n    number: data.number,\n    status: data.status,\n    ingredients: getBurgerParts(data.ingredients, ingredients),\n  };\n}\n\nexport function getBurgerParts(ids: string[], ingredients: IBurgerPart[]): IBurgerPart[] {\n  return removeDuplicates(\n    sortParts(\n      mapBurgerParts(ids, ingredients),\n    ),\n  );\n}\n\nfunction getBurgerPart(id: string, ingredients: IBurgerPart[]): IBurgerPart | undefined {\n  return ingredients.filter(p => p._id === id)[0];\n}\n\nfunction mapBurgerParts(ids: string[], parts: IBurgerPart[]): IBurgerPart[] {\n  return ids.reduce<IBurgerPart[]>((acc, id) => {\n    const nextPart = getBurgerPart(id, parts);\n    if (nextPart) acc.push(nextPart);\n    return acc;\n  }, []);\n}\n\nfunction sortParts(parts: IBurgerPart[]): IBurgerPart[] {\n  return parts.sort((a) => a.type === 'bun' ? -1 : 1);\n}\n\nfunction removeDuplicates(parts: IBurgerPart[]): IBurgerPart[] {\n  return Array.from(new Set(parts));\n}","import { useDispatch } from 'react-redux';\nimport { AppDispatch, AppThunk } from '../store';\n\nexport const useAppDispatch = ()  => useDispatch<AppDispatch | AppThunk>();\n","import React, { SyntheticEvent, useCallback, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport styles from './modal.module.css';\nimport { ModalOverlay } from './components/modal-overlay/modal-overlay';\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport PropTypes from 'prop-types';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { LocationState, Routes } from '../../../services/Routes';\nimport { MAIN_ACTION } from '../../../services/actions';\nimport { useAppDispatch } from '../../../services/hooks/useAppDispatch';\n\ninterface IModalProps {\n  title?: string;\n  children?: React.ReactNode;\n}\n\nModal.propTypes = {\n  title: PropTypes.string,\n  children: PropTypes.element,\n};\n\nconst KEY_DOWN = 'keydown';\n\nexport function Modal({ title = '', children }: IModalProps) {\n\n  const history = useHistory();\n  const { state: locationState } = useLocation<LocationState>();\n  const dispatch = useAppDispatch();\n  const backToUrl = locationState?.backTo ?? Routes.main;\n\n  const hide = useCallback(() => {\n    dispatch(MAIN_ACTION.setModalUrlOff());\n    history.replace({ pathname: backToUrl, state: null });\n  }, [dispatch, history, backToUrl]);\n\n  const onKeyDown = useCallback((e: KeyboardEvent) => {\n    if (e.key === 'Escape') hide();\n  }, [hide]);\n\n  const onWindowClick = useCallback((e: SyntheticEvent) => {\n    e.stopPropagation();\n  }, []);\n\n\n  useEffect(() => {\n    const element = document.body;\n    element.addEventListener(KEY_DOWN, onKeyDown);\n    return () => {\n      element.removeEventListener(KEY_DOWN, onKeyDown);\n    };\n  }, [onKeyDown]);\n\n  const modalElement = document.getElementById('modal');\n  return modalElement && ReactDOM.createPortal(\n    (\n      <>\n        <ModalOverlay onClick={hide} />\n        <div className={styles.window} onClick={onWindowClick}>\n          <div>\n            <div className={`ml-10 mr-10 ${styles.head}`}>\n              <div className={`text text_type_main-large ${styles.title}`}>{title}</div>\n              <CloseIcon type={'primary'} onClick={hide} />\n            </div>\n            {children}\n          </div>\n        </div>\n      </>\n    ),\n    modalElement,\n  );\n}","import React from 'react';\nimport styles from './nutrition.module.css';\nimport PropTypes from 'prop-types';\n\ninterface INutritionProps {\n  text: string;\n  value: number;\n}\n\nNutrition.propTypes = {\n  text: PropTypes.string.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nexport function Nutrition({ text, value }: INutritionProps) {\n  return (\n    <div className={styles.nutrition}>\n      <div className={`text text_type_main-default text_color_inactive`}>{text}</div>\n      <div className={`text text_type_digits-default text_color_inactive`}>{value}</div>\n    </div>\n  );\n}","import { TypedUseSelectorHook, useSelector } from 'react-redux';\nimport { RootState } from '../store';\n\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector\n","import { IngredientsState } from '../reducers';\nimport { RootState } from '../store';\nimport { useAppSelector } from './useAppSelector';\n\nexport function useIngredientsState(): IngredientsState {\n  return useAppSelector((state: RootState) => ({ ...state.ingredients }));\n}","import React from 'react';\nimport { useParams } from 'react-router-dom';\nimport styles from './ingredient-details.module.css';\nimport { Nutrition } from './components/nutrition/nutrition';\nimport { useIngredientsState } from '../../../../services/hooks/useIngredientsState';\n\ninterface IngredientParams {\n  id?: string;\n}\n\nexport function IngredientDetails() {\n  const { id } = useParams<IngredientParams>();\n\n  const { ingredients } = useIngredientsState();\n  const selectedIngredient = ingredients.find(i => i._id === id);\n  if (selectedIngredient == null) return null;\n\n  const { image_large, name, carbohydrates, fat, calories, proteins } = selectedIngredient;\n\n  return (\n    <div className={`mb-15 ${styles.content}`}>\n      <div className={`mb-4 ${styles.image_wrapper}`}><img src={image_large} alt={name} /></div>\n      <span className={`mb-8 text text_type_main-medium`}>{name}</span>\n      <div className={styles.nutrition}>\n        <Nutrition text={'Калории, г'} value={calories} />\n        <Nutrition text={'Белки, г'} value={proteins} />\n        <Nutrition text={'Жиры, г'} value={fat} />\n        <Nutrition text={'Углеводы, г'} value={carbohydrates} />\n      </div>\n    </div>\n  );\n}","import ORDER_DONE from './images/done.png';\nimport CIRCLE_64 from './images/circle64.svg';\nimport MORE from './images/more.png';\n\nexport const Assets = {\n  images: {\n    orderDone: ORDER_DONE,\n    partAvatar: CIRCLE_64,\n    partsMore: MORE\n  },\n};","export default __webpack_public_path__ + \"static/media/done.e036971b.png\";","export default __webpack_public_path__ + \"static/media/circle64.a1c802d6.svg\";","export default \"data:image/png;base64,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\"","export function formatOrderNumber(number: number): string {\n  return `${number}`.padStart(6, '0');\n}","import { RootState } from '../store';\nimport { IOrderState } from '../reducers/orders';\nimport { useAppSelector } from './useAppSelector';\n\nexport function useOrderState(): IOrderState {\n  return useAppSelector((state: RootState) => ({ ...state.orders }));\n}","import { IMainState } from '../reducers';\nimport { RootState } from '../store';\nimport { useAppSelector } from './useAppSelector';\n\nexport function useMainState(): IMainState {\n  return useAppSelector((state: RootState) => ({ ...state.main }));\n}","import React, { useMemo } from 'react';\nimport styles from './order-details.module.css';\nimport { Assets } from '../../../../Assets';\nimport { useParams } from 'react-router-dom';\nimport { formatOrderNumber } from '../../../../services/converters/formatOrderNumber';\nimport { useOrderState } from '../../../../services/hooks';\n\n\nconst ICON_URL = Assets.images.orderDone;\n\ninterface OrderPageParams {\n  id?: string;\n}\n\nexport function OrderDetails() {\n\n  const { showedOrders } = useOrderState();\n  const { id = '-1' } = useParams<OrderPageParams>();\n  const order = useMemo(() => showedOrders.find(order => order.id === id), [showedOrders, id]);\n  if (order == null) return null;\n\n  console.log('OrderDetails', order);\n\n  return (\n    <div className={styles.content}>\n      <span className='text text_type_digits-large mb-8'>{formatOrderNumber(order.number)}</span>\n      <span className='text text_type_main-medium mb-15'>{order.name}</span>\n      <img src={ICON_URL} className={`mb-15 ${styles.done}`} alt='Иконка Готовности' />\n      <span className='text text_type_main-default  mb-2'>Ваш заказ начали готовить</span>\n      <span\n        className='text text_type_main-small text_color_inactive mb-30'>Дождитесь готовности  на орбитальной станции</span>\n    </div>\n  );\n}","import React, { useEffect } from 'react';\nimport { RouteProps } from 'react-router';\nimport { Redirect, Route, useLocation } from 'react-router-dom';\nimport { Routes } from '../../../services/Routes';\nimport { MainActionType } from '../../../services/actions';\nimport { useMainState } from '../../../services/hooks/useMainState';\nimport { useAppDispatch } from '../../../services/hooks/useAppDispatch';\n\ninterface IProtectedRouteProps extends RouteProps {\n}\n\nexport function ProtectedRoute({ children, ...rest }: IProtectedRouteProps) {\n\n  const { isAuthorized } = useMainState();\n  const location = useLocation();\n\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    if (!isAuthorized) dispatch({ type: MainActionType.SAVE_AFTER_LOGGING_URL, url: location.pathname });\n  }, [isAuthorized, dispatch, location.pathname]);\n\n  return (<Route {...rest} render={() =>\n    isAuthorized ? (children)\n      : (<Redirect to={Routes.login} />)\n  } />);\n}","import React, { useCallback, useEffect } from 'react';\nimport styles from './forgot-password.module.css';\nimport { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Routes } from '../../services/Routes';\nimport { MAIN_ACTION, MainActionType } from '../../services/actions';\nimport { useMainState, useAppDispatch } from '../../services/hooks';\n\nexport function ForgotPassword() {\n\n  const { userRestoreEmail: email = '', isRestoreSuccess } = useMainState();\n\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n\n  const onEmailChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    e.persist(); // deprecated since React 17\n    dispatch({ type: MainActionType.RESTORE_PAGE_CHANGE, email: e.target.value });\n  }, [dispatch]);\n\n  const onSubmit = useCallback((e) => {\n    e.preventDefault();\n    dispatch(MAIN_ACTION.restorePassActionCreator({ email }));\n  }, [dispatch, email]);\n\n  useEffect(() => {\n    if (isRestoreSuccess) {\n      history.replace({\n        pathname: Routes.resetPassword,\n        state: {},\n      });\n      return;\n    }\n  }, [history, isRestoreSuccess]);\n\n  return (<div className={styles.wrap}>\n    <form className={styles.content} onSubmit={onSubmit}>\n      <div className={`text text_type_main-medium ${styles.label}`}>Восстановление пароля</div>\n      <Input type={'email'} placeholder={'Укажите email'} value={email} onChange={onEmailChange} />\n      <Button size={'medium'} type={'primary'}>Восстановить</Button>\n      <div className={`text text_type_main-small ${styles.about}`}>\n        <div>Вспомнили пароль? <Link to={Routes.login}>Войти</Link></div>\n      </div>\n    </form>\n  </div>);\n}","import React, { useCallback } from 'react';\nimport { Button, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, Redirect } from 'react-router-dom';\nimport styles from './login.module.css';\nimport { Routes } from '../../services/Routes';\nimport { MAIN_ACTION, MainActionType } from '../../services/actions';\nimport { useMainState, useAppDispatch } from '../../services/hooks';\n\nexport function Login() {\n\n  const dispatch = useAppDispatch();\n  const {\n    loginPageEmail: email = '',\n    loginPagePassword: password = '',\n    isAuthorized,\n    urlAfterLogging = Routes.main,\n  } = useMainState();\n\n\n  const onLoginChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    e.persist();  // deprecated since React 17\n    dispatch({\n      type: MainActionType.LOGIN_PAGE_CHANGE, data: {\n        password,\n        email: e.target.value,\n      },\n    });\n  }, [dispatch, password]);\n\n  const onPasswordChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    e.persist();  // deprecated since React 17\n    dispatch({\n      type: MainActionType.LOGIN_PAGE_CHANGE, data: {\n        email,\n        password: e.target.value,\n      },\n    });\n  }, [dispatch, email]);\n\n  const onSubmit = useCallback((e) => {\n    e.preventDefault();\n    dispatch(MAIN_ACTION.login({\n      email, password,\n    }));\n  }, [dispatch, email, password]);\n\n  return (<div className={styles.wrap}>\n    {isAuthorized\n      ? (<Redirect to={urlAfterLogging} />)\n      : (\n        <form className={styles.content} onSubmit={onSubmit}>\n          <div className={`text text_type_main-medium ${styles.label}`}>Вход</div>\n          <Input type={'email'} placeholder={'Email'} value={email} onChange={onLoginChange} />\n          <PasswordInput name={'password'} value={password} onChange={onPasswordChange} />\n          <Button size={'medium'} type={'primary'}>Войти</Button>\n          <div className={`text text_type_main-small ${styles.about}`}>\n            <div>Вы новый пользователь? <Link to={Routes.register}>Зарегистрироваться</Link></div>\n            <div>Забыли пароль? <Link to={Routes.forgotPassword}>Восстановить пароль</Link></div>\n          </div>\n        </form>\n      )}\n  </div>);\n}","import React from 'react';\nimport styles from './burger-ingredients-tabs.module.css';\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\nimport PropTypes from 'prop-types';\nimport { MainActionType } from '../../../../services/actions';\nimport { useMainState } from '../../../../services/hooks/useMainState';\nimport { useAppDispatch } from '../../../../services/hooks/useAppDispatch';\n\n\nBurgerIngredientsTabs.propTypes = {\n  onPageSelect: PropTypes.func,\n};\n\nexport function BurgerIngredientsTabs() {\n\n  const dispatch = useAppDispatch();\n  const { currentTabIndex, tabs } = useMainState();\n\n  const onClick = (value: string) => {\n    dispatch({ type: MainActionType.TAB_SELECT, index: parseInt(value) });\n  };\n\n  return (\n    <div className={`mt-5 ${styles.main}`}>\n      {\n        tabs.map(({ name }, index) => (\n          <Tab key={index} value={index.toString()} active={currentTabIndex === index} onClick={onClick}>\n            {name}\n          </Tab>\n        ))\n      }\n    </div>\n  );\n}","import React from 'react';\nimport styles from './money-counter.module.css';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport PropTypes from 'prop-types';\n\ninterface IMoneyCounterProps {\n  sum: number;\n  big?: boolean;\n}\n\nMoneyCounter.propTypes = {\n  sum: PropTypes.number.isRequired,\n  big: PropTypes.bool,\n};\n\nexport function MoneyCounter({ sum, big = false }: IMoneyCounterProps) {\n  const digitClass = big ? 'text_type_digits-medium' : 'text_type_digits-default';\n  const iconClass = (big ? styles.big_icon : '') + ' ' + styles.icon;\n  return (\n    <div className={`text ${digitClass} ${styles.main}`}>\n      <div className='mr-2'>{sum}</div>\n      <div className={iconClass}>\n        <CurrencyIcon type={'primary'} />\n      </div>\n    </div>\n  );\n}","import React, { useCallback } from 'react';\nimport { useDrag } from 'react-dnd';\nimport { Counter } from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './burger-ingredients-item.module.css';\nimport { IBurgerPart, IBurgerPartPropType } from '../../../../services/model/IBurgerPart';\nimport { MoneyCounter } from '../../../common/money-counter/money-counter';\nimport { useHistory } from 'react-router-dom';\nimport { Routes } from '../../../../services/Routes';\nimport { MAIN_ACTION } from '../../../../services/actions';\nimport { useOrderState } from '../../../../services/hooks';\nimport { useAppDispatch } from '../../../../services/hooks/useAppDispatch';\n\ninterface IBurgerConstructorItemProps {\n  part: IBurgerPart;\n}\n\nBurgerIngredientsItem.propTypes = {\n  part: IBurgerPartPropType.isRequired,\n};\n\nexport function BurgerIngredientsItem({ part }: IBurgerConstructorItemProps) {\n\n  const dispatch = useAppDispatch();\n\n  const [_, dragRef] = useDrag({\n    type: 'item',\n    item: { id: part._id },\n  }, [part]);\n\n  const { ingredientAmountMap } = useOrderState();\n  const { price, name, image, _id } = part;\n  const amount = ingredientAmountMap[_id] ?? 0;\n\n  const history = useHistory();\n\n  const onItemClick = useCallback((ingredient: IBurgerPart) => {\n    dispatch(MAIN_ACTION.setModalUrlOn());\n    history.replace({\n      pathname: Routes.ingredientLinkCreator(ingredient._id),\n    });\n\n  }, [history, dispatch]);\n\n  const hasAmount = amount > 0;\n  const counter = hasAmount ? (<Counter count={amount} size='default' />) : null;\n  return (\n    <div data-cy=\"burger-part\" className={styles.item} onClick={() => onItemClick(part)} ref={dragRef}>\n      <img src={image} alt={name} className={styles.image} />\n      <MoneyCounter sum={price} />\n      <div className={`text text_type_main-default ${styles.name}`}>{name}</div>\n      {counter}\n    </div>\n  );\n}","import React from 'react';\nimport styles from './burger-ingredients-section.module.css';\nimport { IBurgerPart, IBurgerPartPropType } from '../../../../services/model/IBurgerPart';\nimport { BurgerIngredientsItem } from '../burger-ingredients-item/burger-ingredients-item';\nimport PropTypes from 'prop-types';\n\nexport interface IBurgerConstructorSectionProps {\n  title: string;\n  parts: IBurgerPart[];\n}\n\nBurgerIngredientsSection.propTypes = {\n  title: PropTypes.string.isRequired,\n  parts: PropTypes.arrayOf(IBurgerPartPropType),\n};\n\nexport function BurgerIngredientsSection({ title, parts }: IBurgerConstructorSectionProps) {\n  return (\n    <section className={`${styles.section} mt-10`}>\n      <span className='text text_type_main-medium'>{title}</span>\n      <div className={`mt-6 pl-4 ${styles.list}`}>\n        {parts.map(p => (\n          <BurgerIngredientsItem key={p._id} part={p} />\n        ))}\n      </div>\n    </section>\n  );\n}","import React, { useCallback, useEffect, useRef } from 'react';\nimport styles from './burger-ingredients.module.css';\nimport { BurgerIngredientsTabs } from './components/burger-ingredients-tabs/burger-ingredients-tabs';\nimport { BurgerIngredientsSection } from './components/burger-ingredients-section/burger-ingredients-section';\nimport { IBurgerPart } from '../../services/model/IBurgerPart';\nimport { MainActionType } from '../../services/actions';\nimport { useIngredientsState } from '../../services/hooks/useIngredientsState';\nimport { useAppDispatch } from '../../services/hooks/useAppDispatch';\n\nexport function BurgerIngredients() {\n\n  const { ingredients } = useIngredientsState();\n  const dispatch = useAppDispatch();\n\n  const listRef = useRef<HTMLDivElement>(null);\n  const ref1 = useRef<HTMLDivElement>(null);\n  const ref2 = useRef<HTMLDivElement>(null);\n  const ref3 = useRef<HTMLDivElement>(null);\n\n  const handleScroll: EventListener = useCallback((ev: Event) => {\n    const listEl = ev.currentTarget as HTMLDivElement;\n    const sectionEl1 = ref1.current;\n    const sectionEl2 = ref2.current;\n    const sectionEl3 = ref3.current;\n    if (listEl && sectionEl1 && sectionEl2 && sectionEl3) {\n      const listPosition = listEl.scrollTop;\n      const deltas = [\n        Math.abs(sectionEl1.offsetTop - listPosition) - sectionEl1.clientHeight * 0.6,\n        Math.abs(sectionEl2.offsetTop - listPosition) - sectionEl2.clientHeight * 0.6,\n        Math.abs(sectionEl3.offsetTop - listPosition) - sectionEl3.clientHeight * 0.6,\n      ];\n      let nearestIndex = 0;\n      let min = deltas[0];\n      for (let i = 1; i < deltas.length; i++) {\n        const next = deltas[i];\n        if (next < min) {\n          min = next;\n          nearestIndex = i;\n        }\n      }\n      dispatch({ type: MainActionType.TAB_SELECT, index: nearestIndex });\n    }\n  }, [ref1, ref2, ref3, dispatch]);\n\n  useEffect(() => {\n    const { current } = listRef;\n    current?.addEventListener('scroll', handleScroll);\n    return () => {\n      current?.removeEventListener('scroll', handleScroll);\n    };\n  }, [listRef, handleScroll]);\n\n  const buns: IBurgerPart[] = [];\n  const fills: IBurgerPart[] = [];\n  const sauces: IBurgerPart[] = [];\n  ingredients.forEach((part) => {\n    switch (part.type) {\n      case 'bun':\n        buns.push(part);\n        break;\n      case 'main':\n        fills.push(part);\n        break;\n      case 'sauce':\n        sauces.push(part);\n        break;\n    }\n  });\n\n\n  return (\n    <div className={`${styles.main}`}>\n      <BurgerIngredientsTabs />\n      <div className={`mb-10 ${styles.list}`} ref={listRef}>\n        <div ref={ref1}><BurgerIngredientsSection title={'Булки'} parts={buns} /></div>\n        <div ref={ref2}><BurgerIngredientsSection title={'Соусы'} parts={sauces} /></div>\n        <div ref={ref3}><BurgerIngredientsSection title={'Начинки'} parts={fills} /></div>\n      </div>\n    </div>\n  );\n}","export interface IConstructorElementData {\n  ingredientId: string;\n  selectedId: string;\n  type?: IConstructorElementType;\n  isLocked?: boolean;\n  handleClose?: () => void;\n  text: string;\n  thumbnail: string;\n  price: number;\n}\n\nexport enum IConstructorElementType {\n  TOP = 'top',\n  BOTTOM = 'bottom',\n}","import React, { useCallback } from 'react';\nimport styles from './burger-constructor-order.module.css';\nimport { Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { MoneyCounter } from '../../../common/money-counter/money-counter';\nimport { MainActionType, ORDERS_ACTION } from '../../../../services/actions';\nimport { useHistory } from 'react-router-dom';\nimport { Routes } from '../../../../services/Routes';\nimport { useMainState, useOrderState } from '../../../../services/hooks';\nimport { useAppDispatch } from '../../../../services/hooks/useAppDispatch';\n\n\nexport function BurgerConstructorOrder() {\n  const dispatch = useAppDispatch();\n  const { isAuthorized } = useMainState();\n  const { sum } = useOrderState();\n  const history = useHistory();\n\n  const onOrderButtonClick = useCallback(() => {\n    if (isAuthorized) {\n      dispatch(ORDERS_ACTION.orderAuthorizedActionCreator());\n    } else {\n      dispatch({ type: MainActionType.SAVE_AFTER_LOGGING_URL, url: Routes.main });\n      history.replace({\n        pathname: Routes.login,\n      });\n    }\n  }, [dispatch, isAuthorized, history]);\n\n  return (\n    <div className={`mr-4 ${styles.main}`}>\n      <div className='mr-10'><MoneyCounter sum={sum} big /></div>\n      <Button type='primary' size='large' onClick={onOrderButtonClick}>\n        {isAuthorized ? 'Оформить заказ' : 'Авторизуйтесь'}\n      </Button>\n    </div>\n  );\n}","import React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './draggable-burger-constructor-item.module.css';\nimport { ORDERS_ACTION } from '../../../../services/actions';\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { DragSourceMonitor, useDrag, useDrop } from 'react-dnd';\nimport { useAppDispatch } from '../../../../services/hooks/useAppDispatch';\n\ninterface IBurgerConstructorItemProps {\n  ingredientId: string;\n  selectedId: string;\n  type?: 'top' | 'bottom';\n  isLocked?: boolean;\n  handleClose?: () => void;\n  text: string;\n  thumbnail: string;\n  price: number;\n}\n\nDraggableBurgerConstructorItem.propTypes = {\n  ingredientId: PropTypes.string.isRequired,\n  selectedId: PropTypes.string.isRequired,\n  type: PropTypes.string,\n  isLocked: PropTypes.bool,\n  handleClose: PropTypes.func,\n  text: PropTypes.string.isRequired,\n  thumbnail: PropTypes.string.isRequired,\n  price: PropTypes.number.isRequired,\n};\n\nconst BASKET_DRAGGABLE_TYPE = 'BASKET_DRAGGABLE_TYPE';\n\ninterface DragItem {\n  orderIndex: number;\n  selectedId: string;\n  id: string;\n  type: string;\n}\n\nexport function DraggableBurgerConstructorItem(props: IBurgerConstructorItemProps) {\n  const { selectedId, ingredientId } = props;\n  const dispatch = useAppDispatch();\n\n  const ref = useRef<HTMLDivElement>(null);\n\n  const [{ isDragging }, dragRef] = useDrag({\n    type: BASKET_DRAGGABLE_TYPE,\n    item: () => ({ selectedId }),\n    collect: (monitor: DragSourceMonitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  }, [selectedId]);\n\n  const [_, dropRef] = useDrop({\n    accept: BASKET_DRAGGABLE_TYPE,\n    collect(monitor) {\n      return {\n        isHover: monitor.isOver(),\n      };\n    },\n    hover(item: DragItem) {\n      const selectedId1 = item.selectedId;\n      const selectedId2 = selectedId;\n      if (selectedId1 !== selectedId2) {\n        dispatch(ORDERS_ACTION.swapBasketItem(selectedId1, selectedId2));\n      }\n    },\n  }, [selectedId, dispatch]);\n\n  dragRef(dropRef(ref));\n  const opacity = isDragging ? 0 : 1;\n  return (\n    <div className={styles.basketItem} ref={ref} style={{ opacity }} data-cy=\"burger-basket-order-item\">\n      <ConstructorElement {...props}\n                          handleClose={\n                            () => dispatch(ORDERS_ACTION.removeFromBasket(\n                              { selectedId, ingredientId },\n                            ))\n                          } />\n    </div>\n\n  );\n}\n","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './loading.module.css';\n\nexport interface IProps {\n  text?: string;\n  alert?: boolean;\n}\n\nLoading.propTypes = {\n  text: PropTypes.string,\n  alert: PropTypes.bool,\n};\n\nexport function Loading({ text = 'Loading...', alert }: IProps) {\n  const textClassName = useMemo(() => alert ? styles.alert : '', [\n    alert,\n  ]);\n  return (\n    <div className={styles.wrap}>\n      <div className={`text text_color_inactive text_type_main-medium ${styles.content} ${textClassName}`}>{text}</div>\n    </div>\n  );\n}","import React, { useMemo } from 'react';\nimport styles from './burger-constructor.module.css';\nimport { BurgerConstructorOrder } from './components/burger-constructor-order/burger-constructor-order';\nimport { IConstructorElementData, IConstructorElementType } from '../../services/model/IConstructorElementData';\nimport { ORDERS_ACTION } from '../../services/actions';\nimport { useDrop } from 'react-dnd';\nimport { IdObject } from '../../services/model/IdObject';\nimport { DraggableBurgerConstructorItem } from './components/draggable-burger-constructor-item/draggable-burger-constructor-item';\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useOrderState } from '../../services/hooks';\nimport { Loading } from '../loading/loading';\nimport { useAppDispatch } from '../../services/hooks/useAppDispatch';\n\nfunction mapBun(bun: IConstructorElementData, suffix: string, type: IConstructorElementType): IConstructorElementData {\n  return {\n    ...bun,\n    text: `${bun.text} (${suffix})`,\n    type,\n    isLocked: true,\n  };\n}\n\nconst NO_SELECTED_MESSAGE = 'Соберите еще один бургер, бросьте сюда что-нибудь из конструктора слева!';\n\nexport function BurgerConstructor() {\n  const dispatch = useAppDispatch();\n\n  const { selectedBun, selectedParts: parts, sum } = useOrderState();\n\n  const isNoSelected = useMemo(() => selectedBun == null && parts?.length < 1, [selectedBun, parts]);\n\n\n  const [_, dropTargetRef] = useDrop({\n    accept: 'item',\n    drop(item) {\n      const { id } = item as IdObject;\n      dispatch(ORDERS_ACTION.onIngredientDropActionCreator(id));\n    },\n  }, [dispatch]);\n\n  return (\n    <section className={`mt-4 mb-4 ${styles.main}`} ref={dropTargetRef} data-cy=\"burger-basket\">\n      {\n        isNoSelected ? <Loading text={NO_SELECTED_MESSAGE} /> :\n          selectedBun && <ConstructorElement {...mapBun(selectedBun, 'верх', IConstructorElementType.TOP)} />}\n      <div className={`mt-4 mb-4 ${styles.list}`}>\n        {parts.map(part => (\n          <DraggableBurgerConstructorItem key={part.selectedId} {...part} />))}\n      </div>\n      {selectedBun && <ConstructorElement {...mapBun(selectedBun, 'низ', IConstructorElementType.BOTTOM)} />}\n      {sum > 0 && selectedBun && (\n        <div className={`mt-10 mb-10 ${styles.sum}`} data-cy=\"burger-basket-order-button\">\n          <BurgerConstructorOrder />\n        </div>\n      )\n      }\n    </section>\n  );\n}","import React from 'react';\nimport { BurgerConstructor } from '../burger-constructor/burger-constructor';\nimport { useOrderState } from '../../services/hooks';\nimport { Loading } from '../loading/loading';\n\n\nexport function OrderBasket() {\n  const { orderMessage, isBadOrderMessage } = useOrderState();\n  return (\n    <> {\n      orderMessage ?\n        <Loading text={orderMessage} alert={isBadOrderMessage} /> :\n        <BurgerConstructor />\n    }\n    </>\n  );\n}","import React from 'react';\nimport styles from './main.module.css';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { BurgerIngredients } from '../../components/burger-ingredients/burger-ingredients';\nimport { DndProvider } from 'react-dnd';\nimport { OrderBasket } from '../../components/order-basket/order-basket';\n\nexport function Main() {\n  return (<DndProvider backend={HTML5Backend}>\n    <main className={styles.content}>\n      <div className={styles.col_left}>\n        <span className='text text_type_main-large'>Соберите бургер</span>\n        <BurgerIngredients />\n      </div>\n      <div className={styles.col_right}>\n        <OrderBasket />\n      </div>\n    </main>\n  </DndProvider>);\n}","import React from 'react';\n\nexport function Page404() {\n  return (<div className={`p-2 text text_color_accent`}>\n    Page 404\n  </div>);\n}","import React, { useCallback, useEffect, useMemo } from 'react';\nimport styles from './profile-editor.module.css';\nimport { MAIN_ACTION, MainActionType } from '../../services/actions';\nimport { Button, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Loading } from '../loading/loading';\nimport { useMainState } from '../../services/hooks/useMainState';\nimport { useAppDispatch } from '../../services/hooks/useAppDispatch';\n\nexport function ProfileEditor() {\n  const {\n    isProfileSuccess = false,\n    userEmail = '',\n    userName = '',\n    userPassword = '',\n    profileName: name = userName,\n    profileEmail: email = userEmail,\n    profilePassword: password = userPassword,\n  } = useMainState();\n\n  const profileChanged = useMemo(() => userEmail !== email\n    || userName !== name\n    || password !== userPassword,\n    [userName, userEmail, name, email, password, userPassword]);\n\n  const dispatch = useAppDispatch();\n\n  const onNameChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    e.persist(); // deprecated since React 17\n    dispatch({\n      type: MainActionType.PROFILE_PAGE_CHANGE, data: {\n        name: e.target.value,\n        email, password,\n      },\n    });\n  }, [dispatch, email, password]);\n\n  const onEmailChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    e.persist(); // deprecated since React 17\n    dispatch({\n      type: MainActionType.PROFILE_PAGE_CHANGE, data: {\n        name,\n        email: e.target.value,\n        password,\n      },\n    });\n  }, [dispatch, name, password]);\n\n  const onPasswordChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    e.persist(); // deprecated since React 17\n    dispatch({\n      type: MainActionType.PROFILE_PAGE_CHANGE, data: {\n        name, email,\n        password: e.target.value,\n      },\n    });\n  }, [dispatch, name, email]);\n\n  const onSubmit = useCallback((e) => {\n    e.preventDefault();\n    dispatch(MAIN_ACTION.updateProfileActionCreator());\n  }, [dispatch]);\n\n  const onResetClick = useCallback(() => {\n    dispatch({ type: MainActionType.PROFILE_PAGE_RESET });\n  }, [dispatch]);\n\n  const buttonClass = useMemo(() =>\n      profileChanged ? styles.buttons : `${styles.buttons} ${styles.hidden}`, [\n      profileChanged,\n    ],\n  );\n\n  useEffect(() => {\n    if (!isProfileSuccess) {\n      dispatch(MAIN_ACTION.requestProfileActionCreator());\n    }\n  }, [isProfileSuccess, dispatch]);\n\n  return (\n    <>\n      {isProfileSuccess ? (\n          <form className={styles.main} onSubmit={onSubmit}>\n            <Input placeholder={'Имя'} value={name} onChange={onNameChange} />\n            <Input placeholder={'Логин'} value={email} onChange={onEmailChange} />\n            <PasswordInput name={'password'} value={password} onChange={onPasswordChange} />\n            <div className={buttonClass}>\n                                    <span onClick={onResetClick}\n                                          className={`text text_type_main-small ${styles.link}`}>Отмена</span>\n              <Button size={'medium'} type={'primary'}>Сохранить</Button>\n            </div>\n          </form>\n        )\n        : (\n          <Loading />\n        )}\n    </>\n  );\n}","import styles from '../order-feed-item-status.module.css';\n\nconst STATUS_TEXTS: Record<string, string> = {\n  'done': 'Выполнен',\n};\n\nconst STATUS_CLASSNAMES: Record<string, string> = {\n  'done': `text text_type_main-default ${styles.success}`,\n};\n\nexport function getStatusText(status: string): string {\n  return STATUS_TEXTS[status] ?? status;\n}\n\nexport function getStatusClassname(status: string): string {\n  return STATUS_CLASSNAMES[status] ?? 'text text_type_main-default';\n}","import React, { useMemo } from 'react';\nimport { getStatusClassname, getStatusText } from './utils/createStatusText';\nimport PropTypes from 'prop-types';\n\ninterface IOrderFeedItemStatus {\n  status: string;\n}\n\nOrderFeedItemStatus.propTypes = {\n  status: PropTypes.string.isRequired,\n};\n\nexport function OrderFeedItemStatus({ status }: IOrderFeedItemStatus) {\n  const statusText = useMemo(() => getStatusText(status), [status]);\n  const statusClassName = useMemo(() => getStatusClassname(status), [status]);\n  return (\n    <div className={statusClassName}>{statusText}</div>\n  );\n}\n\n\n","import React, { useMemo } from 'react';\nimport styles from './order-feed-item-part.module.css';\nimport { Assets } from '../../../Assets';\nimport PropTypes from 'prop-types';\n\nexport interface IOrderFeedItemProps {\n  imageUrl: string;\n  zIndex: number;\n  overlap?: boolean;\n  text?: string;\n}\n\nOrderFeedItemPart.propTypes = {\n  imageUrl: PropTypes.string.isRequired,\n  zIndex: PropTypes.number.isRequired,\n  overlap: PropTypes.bool,\n  text: PropTypes.string,\n};\n\nexport function OrderFeedItemPart({ imageUrl, zIndex, text, overlap }: IOrderFeedItemProps) {\n\n  const mainClassName = useMemo(() => overlap === true ?\n    `${styles.circle} ${styles.overlap}` : `${styles.circle}`,\n    [overlap]);\n\n  return (\n    <div className={mainClassName} style={{\n      zIndex,\n      backgroundImage: `url(${Assets.images.partAvatar})`,\n    }}>\n      <img className={styles.img} src={imageUrl} />\n      {text && (<div className={`text text_type_main-default ${styles.text}`}>{text}</div>)}\n    </div>\n  );\n}","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './order-feed-item-parts.module.css';\nimport { IBurgerPart, IBurgerPartPropType } from '../../services/model/IBurgerPart';\nimport { Assets } from '../../Assets';\nimport { IOrderFeedItemProps, OrderFeedItemPart } from '../common/order-feed-item-part/order-feed-item-part';\n\ninterface IProps {\n  ingredients: IBurgerPart[];\n  maxLength: number;\n}\n\nOrderFeedItemParts.propTypes = {\n  ingredients: PropTypes.arrayOf(IBurgerPartPropType),\n  maxLength: PropTypes.number.isRequired\n};\n\nexport function OrderFeedItemParts({ ingredients, maxLength }: IProps) {\n\n  const itemProps: IOrderFeedItemProps [] = useMemo(() => {\n    const LENGTH = ingredients.length;\n    const overFlow = LENGTH - maxLength;\n    const isOverFlow = overFlow > 0;\n\n    let nextZindex = maxLength + 1;\n\n    const props: IOrderFeedItemProps[] = [\n      ...ingredients\n        .slice(0, maxLength)\n        .map((part) => (\n          {\n            imageUrl: part.image_mobile,\n            zIndex: nextZindex--,\n          }\n        )),\n    ];\n    if (isOverFlow) props.push({\n      imageUrl: Assets.images.partsMore,\n      text: `+${overFlow}`,\n      zIndex:  nextZindex--,\n    });\n    return props;\n  }, [ingredients, maxLength]);\n\n  return (\n    <div className={styles.main}>\n      <div className={styles.row}>\n        {\n          itemProps\n            .map((props, index) => (\n              <OrderFeedItemPart key={index} overlap={true} {...props} />\n            ))\n        }\n      </div>\n    </div>\n  );\n}","const MS_IN_DAY = 24 * 3600 * 1000;\nconst TODAY = new Date();\nconst TODAY_MAX_MS = `${TODAY.getMonth() + 1} ${TODAY.getDate()} ${TODAY.getFullYear()} 23:59:59`;\nconst TODAY_MAX_DATE = new Date(TODAY_MAX_MS);\n\nexport function formatDate(str: string): string {\n  let result = str;\n  try {\n    const date = new Date(str);\n    const msDiff = TODAY_MAX_DATE.getTime() - date.getTime();\n    const dayDiff = msDiff / MS_IN_DAY;\n\n    let day = date.toLocaleDateString('ru', {\n      dateStyle: 'medium',\n    });\n\n    const isToday = dayDiff < 1;\n    const isYesterday = dayDiff > 1 && dayDiff < 2;\n    const isTwoDay = dayDiff > 2 && dayDiff < 3;\n\n    if (isToday) day = 'Сегодня';\n    if (isYesterday) day = 'Вчера';\n    if (isTwoDay) day = 'Два дня назад';\n\n    const time = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n\n    const timeZoneOffset = Math.floor(date.getTimezoneOffset() / 60);\n    const sign = timeZoneOffset > 0 ? '-' : '+';\n    const offset = timeZoneOffset !== 0 ? `i-GMT${sign}${Math.abs(timeZoneOffset)}` : '';\n\n    result = `${day}, ${time} ${offset}`;\n  } catch (e) {\n    console.warn(e);\n  }\n\n  return result;\n}","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { formatDate } from '../../services/converters/formatDate';\n\ninterface IProps {\n  data: string;\n}\n\nOrderData.propTypes = {\n  data: PropTypes.string.isRequired,\n};\n\nexport function OrderData({ data }: IProps) {\n  const dateText = useMemo(() => formatDate(data), [data]);\n\n  return (\n    <div className='text text_type_main-default text_color_inactive'>{dateText}</div>\n  );\n}","import React, { useMemo } from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport styles from './order-feed-item.module.css';\nimport { OrderFeedItemStatus } from '../order-feed-item-status/order-feed-item-status';\nimport { OrderFeedItemParts } from '../order-feed-item-parts/order-feed-item-parts';\nimport { IBurgerPart, IBurgerPartPropType } from '../../services/model/IBurgerPart';\nimport { IOrderFeedItem, OrderStatus } from '../../services/model/IOrderFeedItem';\nimport PropTypes from 'prop-types';\nimport { OrderData } from '../order-data/order-data';\nimport { formatOrderNumber } from '../../services/converters/formatOrderNumber';\n\nexport interface IOrderFeedItemProps extends IOrderFeedItem {\n  name: string;\n  id: string;\n  number: number;\n  ingredients: IBurgerPart[];\n  status: OrderStatus;\n  createdAt: string;\n  withStatus?: boolean;\n}\n\nOrderFeedItem.propTypes = {\n  name: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n  number: PropTypes.number.isRequired,\n  ingredients: PropTypes.arrayOf(IBurgerPartPropType),\n  status: PropTypes.string.isRequired,\n  createdAt: PropTypes.string.isRequired,\n  withStatus: PropTypes.bool,\n};\n\nexport function OrderFeedItem({ id, name, withStatus, number, ingredients, status, createdAt }: IOrderFeedItemProps) {\n  const history = useHistory();\n  const { url } = useRouteMatch();\n  const openUrl = useMemo(() => `${url}/${id}`, [url, id]);\n  return (\n    <div className={styles.main} onClick={() => history.push(openUrl)}>\n      <div className={styles.row}>\n        <div className='text text_type_digits-default'>#{formatOrderNumber(number)}</div>\n        <OrderData data={createdAt} />\n      </div>\n      <div className={styles.rowName}>\n        <div className='text text_type_main-medium'>{name}</div>\n        {withStatus && (<OrderFeedItemStatus status={status} />)}\n      </div>\n      <OrderFeedItemParts ingredients={ingredients} maxLength={5} />\n    </div>\n  );\n}","import { useEffect } from 'react';\nimport { ORDERS_ACTION } from '../actions';\nimport { useMainState } from './useMainState';\nimport { useAppDispatch } from './useAppDispatch';\n\nexport function useOrderFeed() {\n  const {\n    isAuthorized,\n  } = useMainState();\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    if (isAuthorized) {\n      dispatch(ORDERS_ACTION.initOrderFeedSocket());\n    } else {\n      dispatch(ORDERS_ACTION.updateOrderFeedFromHttp());\n    }\n\n    return () => {\n      dispatch(ORDERS_ACTION.closeSocket());\n    };\n  }, [dispatch, isAuthorized]);\n\n}","import React, { useMemo } from 'react';\nimport styles from './order-feed.module.css';\nimport { OrderFeedItem } from '../order-feed-item/order-feed-item';\nimport PropTypes from 'prop-types';\nimport { useOrderState } from '../../services/hooks';\nimport { useOrderFeed } from '../../services/hooks/useOrderFeed';\n\nexport interface IOrderFeedProps {\n  withStatus?: boolean\n}\n\nOrderFeed.propTypes = {\n  withStatus: PropTypes.bool\n}\n\nexport function OrderFeed({withStatus}: IOrderFeedProps) {\n  useOrderFeed();\n  const { orderFeed } = useOrderState();\n  const hasOrders = useMemo(() => orderFeed.length > 0, [orderFeed]);\n\n  return (\n    <>\n      {hasOrders ? (\n        <div className={styles.list}>\n          {orderFeed.map(order => (\n            <OrderFeedItem key={order.id} withStatus={withStatus} {...order} />\n          ))}\n        </div>\n      ) : (\n        <div className='text text_type_main-small text_color_inactive'>Вы пока ничего не заказали</div>\n      )}\n    </>\n  );\n}","import React, { useCallback } from 'react';\nimport styles from './profile.module.css';\nimport { NavLink, Route, Switch } from 'react-router-dom';\nimport { Routes } from '../../services/Routes';\nimport { MAIN_ACTION } from '../../services/actions';\nimport { ProfileEditor } from '../../components/profile-editor/profile-editor';\nimport { OrderFeed } from '../../components/order-feed/order-feed';\nimport { useAppDispatch } from '../../services/hooks';\n\nexport function Profile() {\n  const dispatch = useAppDispatch();\n\n  const onLogoutClick = useCallback(() => {\n    dispatch(MAIN_ACTION.logout());\n  }, [dispatch]);\n\n  return (\n    <div className={styles.content}>\n      <div className={styles.col_left}>\n        <div className={`text text_type_main-medium mt-30 ${styles.links}`}>\n          <NavLink to={Routes.profile} exact={true} className='text_color_inactive'\n                   activeClassName={styles.active}>Профиль</NavLink>\n          <NavLink to={Routes.profileOrders} exact={true} className='text_color_inactive'\n                   activeClassName={styles.active}>История заказов</NavLink>\n          <span onClick={onLogoutClick}\n                className={`text_color_inactive ${styles.link}`}>Выход</span>\n        </div>\n\n        <div className='text text_type_main-small text_color_inactive mt-20'>В этом разделе вы можете<br />\n          изменить свои персональные данные\n        </div>\n      </div>\n\n      <div className={styles.col_right}>\n        <Switch>\n          <Route path={Routes.profile} exact={true}><ProfileEditor /></Route>\n          <Route path={Routes.profileOrders} exact={true}>\n            <OrderFeed withStatus={true} />\n          </Route>\n        </Switch>\n      </div>\n    </div>\n  );\n}","import React, { useCallback } from 'react';\nimport styles from './register.module.css';\nimport { Button, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, Redirect } from 'react-router-dom';\nimport { Routes } from '../../services/Routes';\nimport { MAIN_ACTION, MainActionType } from '../../services/actions';\nimport { useAppDispatch, useMainState } from '../../services/hooks';\n\nexport function Register() {\n\n  const dispatch = useAppDispatch();\n  const {\n    userRegisterEmail: email = '',\n    userRegisterName: name = '',\n    userRegisterPassword: password = '',\n    isAuthorized,\n    urlAfterLogging = Routes.main,\n  } = useMainState();\n\n\n  const onNameChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    e.persist(); // deprecated since React 17\n    dispatch({\n      type: MainActionType.REGISTRATION_PAGE_CHANGE,\n      data: {\n        email, password,\n        name: e.target.value,\n      },\n    });\n  }, [dispatch, email, password]);\n\n  const onLoginChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    e.persist(); // deprecated since React 17\n    dispatch({\n      type: MainActionType.REGISTRATION_PAGE_CHANGE,\n      data: {\n        password, name,\n        email: e.target.value,\n      },\n    });\n  }, [dispatch, password, name]);\n\n  const onPasswordChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    e.persist(); // deprecated since React 17\n    dispatch({\n      type: MainActionType.REGISTRATION_PAGE_CHANGE,\n      data: {\n        email, name,\n        password: e.target.value,\n      },\n    });\n  }, [dispatch, email, name]);\n\n  const onSubmit = useCallback((e) => {\n    e.preventDefault();\n    dispatch(MAIN_ACTION.registerActionCreator({\n      email, name, password,\n    }));\n  }, [email, name, password, dispatch]);\n\n  return (<div className={styles.wrap}>\n    {isAuthorized\n      ? (<Redirect to={urlAfterLogging} />)\n      : (\n        <form className={styles.content} onSubmit={onSubmit}>\n          <div className={`text text_type_main-medium ${styles.label}`}>Регистрация</div>\n          <Input type={'text'} placeholder={'Имя'} value={name} onChange={onNameChange} size={'default'} />\n          <Input type={'email'} placeholder={'Email'} value={email} onChange={onLoginChange} />\n          <PasswordInput name={'password'} value={password} onChange={onPasswordChange} />\n          <Button size={'medium'} type={'primary'}>Зарегистрироваться</Button>\n          <div className={`text text_type_main-small ${styles.about}`}>\n            <div>Уже зарегистрированы? <Link to={Routes.login}>Войти</Link></div>\n          </div>\n        </form>\n      )\n    }\n  </div>);\n}","import React, { useCallback, useEffect } from 'react';\nimport styles from './reset-password.module.css';\nimport { Button, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Routes } from '../../services/Routes';\nimport { MAIN_ACTION, MainActionType } from '../../services/actions';\nimport { useAppDispatch, useMainState } from '../../services/hooks';\n\nexport function ResetPassword() {\n\n  const history = useHistory();\n  const dispatch = useAppDispatch();\n  const {\n    userResetPassword = '',\n    userResetCode = '',\n    isRestoreSuccess,\n  } = useMainState();\n\n  useEffect(() => {\n    if (!isRestoreSuccess) {\n      history.replace({\n        pathname: Routes.main,\n      });\n    }\n  }, [history, isRestoreSuccess]);\n\n  const onPasswordChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    e.persist(); // deprecated since React 17\n    dispatch({\n      type: MainActionType.RESET_PAGE_CHANGE,\n      code: userResetCode,\n      password: e.target.value,\n    });\n  }, [userResetCode, dispatch]);\n\n  const onCodeChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    dispatch({\n      type: MainActionType.RESET_PAGE_CHANGE,\n      code: e.target.value,\n      password: userResetPassword,\n    });\n  }, [dispatch, userResetPassword]);\n\n\n  const onSubmit = useCallback((e) => {\n    e.preventDefault();\n    dispatch(MAIN_ACTION.resetPassActionCreator());\n  }, [dispatch]);\n\n  return (<div className={styles.wrap}>\n    <form className={styles.content} onSubmit={onSubmit}>\n      <div className={`text text_type_main-medium ${styles.label}`}>Восстановление пароля</div>\n      <PasswordInput name={'password'} value={userResetPassword} onChange={onPasswordChange} />\n      <Input type={'text'} placeholder={'Введите код из письма'} value={userResetCode} onChange={onCodeChange} />\n      <Button size={'medium'} type={'primary'}>Сохранить</Button>\n      <div className={`text text_type_main-small ${styles.about}`}>\n        <div>Вспомнили пароль? <Link to={Routes.login}>Войти</Link></div>\n      </div>\n    </form>\n  </div>);\n}","import { IBurgerPart } from './IBurgerPart';\n\nexport interface IApiOrderFeedItem {\n  _id: string; // \"6152596ca0dd75001c7080c1\",\n  ingredients: string[]; // [ \"60d3b41abdacab0026a733c7\", \"60d3b41abdacab0026a733c7\"],\n  status: OrderStatus,\n  name: string; // \"Флюоресцентный бургер\",\n  createdAt: string; //  '2021-09-27T23:53:16.597Z',\n  updatedAt: string; // '2021-09-27T23:53:16.753Z',\n  number: number; // 4029\n}\n\nexport interface IOrderFeedItem {\n  id: string;\n  name: string;\n  number: number;\n  ingredients: IBurgerPart[];\n  status: OrderStatus;\n  createdAt: string;\n  withStatus?: boolean;\n}\n\nexport enum OrderStatus {\n  CREATED = 'created',\n  PENDING = 'pending',\n  DONE = 'done',       \n}","import React, { useMemo } from 'react';\nimport styles from './order-feed-info.module.css';\nimport { countOrderStatus } from '../../services/converters/countOrderStatus';\nimport { formatOrderNumber } from '../../services/converters/formatOrderNumber';\nimport { useOrderState } from '../../services/hooks';\n\nconst classNames = {\n  columnTitle: 'text text_type_main-medium mb-6',\n  done: 'text text_type_digits-default ' + styles.success,\n  processing: 'text text_type_digits-default ',\n  totalTitle: 'text text_type_main-medium ',\n  totalAmount: 'text text_type_digits-large ',\n};\n\nexport function OrderFeedInfo() {\n\n  const { orderFeed, orderTotal, orderToday } = useOrderState();\n\n  const orderStatusMap = useMemo(() => countOrderStatus(orderFeed), [orderFeed]);\n  const done = useMemo(() => orderStatusMap.done.slice(0, 6), [orderStatusMap.done]);\n  const processing = useMemo(\n    () => [...orderStatusMap.created, ...orderStatusMap.pending].slice(0, 6),\n    [orderStatusMap.created, orderStatusMap.pending],\n  );\n\n  return (\n    <div className={styles.main}>\n      <div className={styles.columns}>\n        <div>\n          <div className={classNames.columnTitle}>Готовы:</div>\n          <div className={classNames.done}>\n            {\n              done.map(order => (<div key={order.id}>{formatOrderNumber(order.number)}</div>))\n            }\n          </div>\n        </div>\n        <div>\n          <div className={classNames.columnTitle}>В работе:</div>\n          <div className={classNames.processing}>\n            {\n              processing.map(order => (<div>{formatOrderNumber(order.number)}</div>))\n            }\n          </div>\n        </div>\n      </div>\n      <div>\n        <div className={classNames.totalTitle}>Выполнено за все время:</div>\n        <div className={classNames.totalAmount}>{orderTotal}</div>\n      </div>\n      <div>\n        <div className={classNames.totalTitle}>Выполнено за сегодня::</div>\n        <div className={classNames.totalAmount}>{orderToday}</div>\n      </div>\n\n    </div>\n  );\n}","import { IOrderFeedItem, OrderStatus } from '../model/IOrderFeedItem';\n\nexport interface IOrderStatusMap {\n  unknown: IOrderFeedItem[];\n  created: IOrderFeedItem[];\n  pending: IOrderFeedItem[];\n  done: IOrderFeedItem[];\n}\n\nexport function countOrderStatus(orders: IOrderFeedItem[]): IOrderStatusMap {\n  const unknown: IOrderFeedItem[] = [];\n  const created: IOrderFeedItem[] = [];\n  const pending: IOrderFeedItem[] = [];\n  const done: IOrderFeedItem[] = [];\n\n  orders.forEach(order => {\n    switch (order.status){\n      case OrderStatus.CREATED:\n        created.push(order);\n        break;\n      case OrderStatus.PENDING:\n        pending.push(order);\n        break;\n      case OrderStatus.DONE:\n        done.push(order)\n        break;\n      default:\n        unknown.push(order);\n    }\n  })\n\n  return {\n    unknown,\n    created,\n    pending,\n    done,\n  };\n}\n\n","import React from 'react';\nimport styles from './order-feed-page.module.css';\nimport { OrderFeed } from '../../components/order-feed/order-feed';\nimport { OrderFeedInfo } from '../../components/order-feed-info/order-feed-info';\n\nexport function OrderFeedPage() {\n  return (\n    <div className={styles.main}>\n      <div className='text text_type_main-large mt-10 mb-4'>Лента заказов</div>\n      <div className={styles.columns}>\n        <div className={styles.colLeft}>\n          <OrderFeed />\n        </div>\n        <div className={styles.colRight}>\n          <OrderFeedInfo />\n        </div>\n      </div>\n    </div>\n  );\n}","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { IBurgerPart, IBurgerPartPropType } from '../../../../services/model/IBurgerPart';\nimport { countBurgerParts } from '../../../../services/converters/countBurgerParts';\nimport styles from './order-feed-details-part-list.module.css';\nimport { OrderFeedItemPart } from '../../../common/order-feed-item-part/order-feed-item-part';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\n\ninterface IProps {\n  ingredients: IBurgerPart[];\n}\n\nOrderFeedDetailsPartList.propTypes = {\n  ingredients: PropTypes.arrayOf(IBurgerPartPropType),\n};\n\n\nexport function OrderFeedDetailsPartList({ ingredients }: IProps) {\n\n  const counted = useMemo(() => countBurgerParts(ingredients), [ingredients]);\n\n  const listClassName = useMemo(() => ingredients.length <= 3 ?\n    styles.main : `${styles.main} ${styles.scrollable}`,\n    [ingredients.length]);\n\n  return (\n    <div className={listClassName}>\n      {counted.map(part => (\n        <div key={part._id} className={styles.row}>\n          <div className={styles.rowPart}>\n            <OrderFeedItemPart imageUrl={part.image_mobile} zIndex={1} />\n            <div className='ml-4 text text_type_main-default'>{part.name}</div>\n          </div>\n          <div className={styles.rowPart}>\n            <div className='text text_type_digits-default mr-2'>{part.amount} x {part.price}</div>\n            <CurrencyIcon type={'primary'} />\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}","import { IBurgerPart, IBurgerPartCounted } from '../model/IBurgerPart';\n\nexport function countBurgerParts(parts: IBurgerPart[]): IBurgerPartCounted[] {\n  const idParts: Record<string, IBurgerPartCounted> = {};\n  parts.forEach(part => {\n    const { _id } = part;\n    if (idParts[_id]) idParts[_id].amount++;\n    else idParts[_id] = {\n      ...part,\n      amount: 1,\n    };\n\n    if(part.type==='bun') {\n      idParts[_id] = {\n        ...part,\n        amount: 2,\n      }\n    }\n  });\n  return Object.values(idParts);\n}","import React, { useMemo } from 'react';\nimport { useParams } from 'react-router-dom';\nimport styles from './order-feed-details.module.css';\nimport { IOrderDetailsUrlParams } from '../../services/Routes';\nimport { MoneyCounter } from '../common/money-counter/money-counter';\nimport { OrderData } from '../order-data/order-data';\nimport { OrderFeedDetailsPartList } from './components/order-feed-details-part-list/order-feed-details-part-list';\nimport { OrderFeedItemStatus } from '../order-feed-item-status/order-feed-item-status';\nimport { formatOrderNumber } from '../../services/converters/formatOrderNumber';\nimport { useOrderState } from '../../services/hooks';\nimport { useOrderFeed } from '../../services/hooks/useOrderFeed';\n\nexport function OrderFeedDetails() {\n  useOrderFeed();\n  const { id } = useParams<IOrderDetailsUrlParams>();\n  const { orderFeed } = useOrderState();\n  const order = useMemo(() => orderFeed.find(o => o.id === id), [orderFeed, id]);\n\n  if (order == null) return (\n    <div>\n      Сожалею, заказ с id '#{id}' не найден!\n    </div>\n  );\n\n  return (<div className={styles.main}>\n    <div className={styles.content}>\n      <span className={`text text_type_digits-default ${styles.center}`}>#{formatOrderNumber(order.number)}</span>\n      <div className='mt-10'>\n        <div className='text text_type_main-medium'>{order.name}</div>\n        <div className='mt-1'><OrderFeedItemStatus status={order.status} /></div>\n      </div>\n\n      <div className='mt-15 mb-6 text text_type_main-medium'>Состав:</div>\n      <OrderFeedDetailsPartList ingredients={order.ingredients} />\n      <div className={styles.row}>\n        <OrderData data={order.createdAt} />\n        <div><MoneyCounter sum={order.ingredients.reduce((acc, next) => acc + next.price, 0)} /></div>\n      </div>\n    </div>\n  </div>);\n}","import React from 'react';\nimport { RouteProps } from 'react-router';\nimport { Redirect, Route } from 'react-router-dom';\nimport { Routes } from '../../../services/Routes';\nimport { useMainState } from '../../../services/hooks/useMainState';\n\nexport function ProtectedAuthRoute({ children, ...rest }: RouteProps) {\n\n  const { isAuthorized, urlAfterLogging } = useMainState();\n\n  return (<Route {...rest} render={() =>\n    isAuthorized ? (<Redirect to={urlAfterLogging || Routes.main} />) : (children)\n  } />);\n}","import React, { useEffect, useMemo } from 'react';\nimport styles from './app.module.css';\nimport { AppHeader } from '../app-header/app-header';\nimport { Modal } from '../common/modal/modal';\nimport { IngredientDetails } from '../burger-ingredients/components/ingredient-details/ingredient-details';\nimport { OrderDetails } from '../burger-constructor/components/order-details/order-details';\nimport { Route, Switch, useHistory, useLocation } from 'react-router-dom';\nimport { Routes } from '../../services/Routes';\nimport { ProtectedRoute } from '../common/protected-route/protected-route';\nimport {\n  ForgotPassword,\n  Login,\n  Main,\n  OrderFeedDetails,\n  OrderFeedPage,\n  Page404,\n  Profile,\n  Register,\n  ResetPassword,\n} from '../../pages';\nimport { INGREDIENTS_ACTION, MAIN_ACTION, ORDERS_ACTION } from '../../services/actions';\nimport { Loading } from '../loading/loading';\nimport { ProtectedAuthRoute } from '../common/protected-auth-route/protected-auth-route';\nimport { useIngredientsState, useMainState, useOrderState } from '../../services/hooks';\nimport { useAppDispatch } from '../../services/hooks/useAppDispatch';\n\n\nfunction App() {\n  const {\n    isRestoreRequest,\n    isResetRequest,\n    isRegisterRequest,\n    isLoginRequest,\n    isModalUrl,\n    isAuthorized,\n    isAuthorizationChecking,\n  } = useMainState();\n\n  const {\n    showCreatedOrder,\n  } = useOrderState();\n\n  const { isIngredientsRequest } = useIngredientsState();\n\n  const history = useHistory();\n  const location = useLocation();\n\n  const isLoading = useMemo(() => isIngredientsRequest\n    || isRestoreRequest\n    || isResetRequest\n    || isRegisterRequest\n    || isLoginRequest\n    || isAuthorizationChecking\n    , [\n      isAuthorizationChecking,\n      isIngredientsRequest, isResetRequest,\n      isRestoreRequest, isRegisterRequest,\n      isLoginRequest,\n    ]);\n\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    dispatch(MAIN_ACTION.restoreAuth());\n    dispatch(INGREDIENTS_ACTION.initData());\n  }, [dispatch]);\n\n\n  /**\n   *  redirector\n   */\n  useEffect(() => {\n    if (showCreatedOrder) {\n      dispatch(MAIN_ACTION.setModalUrlOn());\n      dispatch(ORDERS_ACTION.showOrderPopup(showCreatedOrder));\n      history.replace({\n        pathname: Routes.orderPageLinkCreator(showCreatedOrder.id),\n      });\n      return;\n    }\n  }, [dispatch, history, showCreatedOrder]);\n\n  return (\n    <div className={styles.App}>\n      <AppHeader />\n      {isLoading\n        ? (<Loading />)\n        : (<Switch>\n          <Route path={isModalUrl ? location.pathname : Routes.main} exact={true}><Main /></Route>\n          <ProtectedAuthRoute path={Routes.login} exact={true}><Login /></ProtectedAuthRoute>\n          <ProtectedAuthRoute path={Routes.register} exact={true}><Register /></ProtectedAuthRoute>\n          <ProtectedAuthRoute path={Routes.forgotPassword} exact={true}><ForgotPassword /></ProtectedAuthRoute>\n          <Route path={Routes.resetPassword} exact={true}><ResetPassword /></Route>\n          <Route path={Routes.orderFeed} exact={true}><OrderFeedPage /></Route>\n          <Route path={Routes.orderFeedDetails} exact={true}><OrderFeedDetails /></Route>\n          <ProtectedRoute path={Routes.profileOrdersDetails} exact={true}><OrderFeedDetails /></ProtectedRoute>\n          <ProtectedRoute path={Routes.profile}><Profile /></ProtectedRoute>\n          <Route path={Routes.ingredient} exact={true}>\n            <IngredientDetails />\n          </Route>\n          <Route path={Routes.orderPage} exact={true}>\n            <OrderDetails />\n          </Route>\n          <Route><Page404 /></Route>\n        </Switch>)\n      }\n\n      {\n        isModalUrl && (\n          <Route path={Routes.ingredient} exact={true}>\n            <Modal title={'Детали ингредиента'}>\n              <IngredientDetails />\n            </Modal>\n          </Route>\n        )\n      }\n      {\n        isModalUrl && (\n          <Route path={Routes.orderPage} exact={true}>\n            <Modal>\n              <OrderDetails />\n            </Modal>\n          </Route>\n        )\n      }\n    </div>\n  );\n}\n\nexport default App;\n","export interface IMainState {\n\n  currentTabIndex: number;\n  tabs: ITab[];\n\n  userRegisterEmail?: string;\n  userRegisterName?: string;\n  userRegisterPassword?: string;\n  isRegisterRequest?: boolean;\n  isRegisterSuccess?: boolean;\n  isRegisterFailed?: boolean;\n\n  isAuthorized?: boolean;\n  isAuthorizationChecking?: boolean;\n  isNoRefreshToken?: boolean;\n  urlAfterLogging?: string;\n\n  isModalUrl?: boolean;\n\n  loginPageEmail?: string;\n  loginPagePassword?: string;\n  isLoginRequest?: boolean;\n  isLoginSuccess?: boolean;\n  isLoginFailed?: boolean;\n\n  isLogoutRequest?: boolean;\n  isLogoutSuccess?: boolean;\n  isLogoutFailed?: boolean;\n\n  userRestoreEmail?: string;\n  isRestoreRequest?: boolean;\n  isRestoreSuccess?: boolean;\n  isRestoreFailed?: boolean;\n\n  userResetCode?: string;\n  userResetPassword?: string;\n  isResetRequest?: boolean;\n  isResetSuccess?: boolean;\n  isResetFailed?: boolean;\n\n  userTokenAuth?: string;\n  isTokenAuthRequest?: boolean;\n  isTokenAuthSuccess?: boolean;\n  isTokenAuthFailed?: boolean;\n\n  userTokenRefresh?: string;\n  isTokenRefreshRequest?: boolean;\n  isTokenRefreshSuccess?: boolean;\n  isTokenRefreshFailed?: boolean;\n\n  needBackToMainPage?: boolean;\n\n  isProfileRequest?: boolean;\n  isProfileSuccess?: boolean;\n  isProfileFail?: boolean;\n\n  userName?: string;\n  userPassword?: string;\n  userEmail?: string;\n\n  profileName?: string;\n  profileEmail?: string;\n  profilePassword?: string;\n\n  isProfileUpdateRequest?: boolean;\n  isProfileUpdateSuccess?: boolean;\n  isProfileUpdateFail?: boolean;\n\n}\n\n\ninterface ITab {\n  name: string;\n}\n\nexport const InitialMainState: IMainState = {\n  currentTabIndex: 0,\n  tabs: [\n    {\n      name: 'Булки',\n    },\n    {\n      name: 'Соусы',\n    },\n    {\n      name: 'Начинки',\n    },\n  ],\n\n};","import { IMainState, InitialMainState } from './IMainState';\nimport { MainAction, MainActionType } from '../../actions';\nimport {\n  IApiLoginData,\n  IApiLoginResponse,\n  IApiProfileData,\n  IApiRegisterUserData,\n  IApiRegisterUserResponse,\n} from '../../services/ApiService';\n\n\nexport function mainReducer(state: IMainState = InitialMainState, action: MainAction): IMainState {\n  switch (action.type) {\n    case MainActionType.TAB_SELECT:\n      return {\n        ...state,\n        currentTabIndex: action.index,\n      };\n    case MainActionType.REGISTRATION_PAGE_CHANGE:\n      return onRegisterPageChange(action, state);\n    case MainActionType.REGISTRATION_USER_REQUEST:\n      return {\n        ...state,\n        isRegisterRequest: true,\n        isRegisterSuccess: false,\n        isRegisterFailed: false,\n      };\n    case MainActionType.REGISTRATION_USER_SUCCESS:\n      return onRegisterSuccess(action, state);\n    case MainActionType.REGISTRATION_USER_FAIL:\n      return {\n        ...state,\n        isRegisterRequest: false,\n        isRegisterSuccess: false,\n        isRegisterFailed: true,\n      };\n    case MainActionType.LOGIN_PAGE_CHANGE:\n      return onLoginPageChange(action, state);\n    case MainActionType.LOGIN_REQUEST:\n      return {\n        ...state,\n        isLoginRequest: true,\n        isLoginSuccess: false,\n        isLoginFailed: false,\n      };\n    case MainActionType.LOGIN_SUCCESS:\n      return onLoginSuccess(action, state);\n    case MainActionType.LOGIN_FAIL:\n      return {\n        ...state,\n        isLoginRequest: false,\n        isLoginSuccess: false,\n        isLoginFailed: true,\n        isAuthorized: false,\n      };\n    case MainActionType.LOGOUT_REQUEST:\n      return {\n        ...state,\n        isLogoutRequest: true,\n        isLogoutSuccess: false,\n        isLogoutFailed: false,\n      };\n    case MainActionType.LOGOUT_SUCCESS:\n      return {\n        ...state,\n        isLogoutRequest: false,\n        isLogoutSuccess: true,\n        isLogoutFailed: false,\n        isAuthorized: false,\n      };\n    case MainActionType.LOGOUT_FAIL:\n      return {\n        ...state,\n        isLogoutRequest: false,\n        isLogoutSuccess: false,\n        isLogoutFailed: true,\n      };\n    case MainActionType.RESTORE_PAGE_CHANGE:\n      return onRestorePageChange(action, state);\n    case MainActionType.RESTORE_PASS_REQUEST:\n      return {\n        ...state,\n        isRestoreRequest: true,\n      };\n    case MainActionType.RESTORE_PASS_SUCCESS:\n      return {\n        ...state,\n        isRestoreRequest: false,\n        isRestoreSuccess: true,\n        isRestoreFailed: false,\n      };\n    case MainActionType.RESTORE_PASS_FAIL:\n      return {\n        ...state,\n        isRestoreRequest: false,\n        isRestoreSuccess: false,\n        isRestoreFailed: true,\n      };\n    case MainActionType.RESET_PAGE_CHANGE:\n      return onResetPageChange(action, state);\n    case MainActionType.RESET_PASS_REQUEST:\n      return {\n        ...state,\n        isResetRequest: true,\n      };\n    case MainActionType.RESET_PASS_SUCCESS:\n      return {\n        ...state,\n        isResetRequest: false,\n        isResetFailed: false,\n        isResetSuccess: true,\n        isRestoreSuccess: false,\n      };\n    case MainActionType.RESET_PASS_FAIL:\n      return {\n        ...state,\n        isResetRequest: false,\n        isResetFailed: true,\n        isResetSuccess: false,\n        isRestoreSuccess: false,\n      };\n    case MainActionType.TOKEN_REFRESH_REQUEST:\n      // TODO\n      return {\n        ...state,\n      };\n    case MainActionType.TOKEN_REFRESH_SUCCESS:\n      // TODO\n      return {\n        ...state,\n      };\n    case MainActionType.TOKEN_REFRESH_FAIL:\n      // TODO\n      return {\n        ...state,\n      };\n    case MainActionType.PROFILE_REQUEST:\n      return {\n        ...state,\n        isProfileRequest: true,\n        isProfileSuccess: false,\n        isProfileFail: false,\n      };\n    case MainActionType.PROFILE_SUCCESS:\n      return onProfilePageLoad(action, state);\n    case MainActionType.PROFILE_FAIL:\n      return {\n        ...state,\n        isProfileRequest: false,\n        isProfileSuccess: false,\n        isProfileFail: true,\n      };\n\n    case MainActionType.PROFILE_PAGE_CHANGE:\n      return onProfilePageChange(action, state);\n    case MainActionType.PROFILE_PAGE_RESET:\n      return onProfilePageReset(action, state);\n\n    case MainActionType.PROFILE_UPDATE_REQUEST:\n      return {\n        ...state,\n        isProfileUpdateRequest: true,\n        isProfileUpdateSuccess: false,\n        isProfileUpdateFail: false,\n      };\n    case MainActionType.PROFILE_UPDATE_SUCCESS:\n      return {\n        ...state,\n        isProfileUpdateRequest: false,\n        isProfileUpdateSuccess: true,\n        isProfileUpdateFail: false,\n        userName: action.data.name,\n        userPassword: '',\n        userEmail: action.data.email,\n      };\n    case MainActionType.PROFILE_UPDATE_FAIL:\n      return {\n        ...state,\n        isProfileUpdateRequest: false,\n        isProfileUpdateSuccess: false,\n        isProfileUpdateFail: true,\n      };\n    case MainActionType.SAVE_AFTER_LOGGING_URL:\n      return {\n        ...state,\n        urlAfterLogging: action.url,\n      };\n\n\n    case MainActionType.SET_MODAL_URL:\n      return {\n        ...state,\n        isModalUrl: action.isModal,\n      };\n\n    case MainActionType.AUTH_CHECK_START:\n      return {\n        ...state,\n        isAuthorizationChecking: true,\n      };\n    case MainActionType.AUTH_CHECK_END:\n      return {\n        ...state,\n        isAuthorizationChecking: false,\n        isAuthorized: action.data.isAuthorized,\n      };\n    default:\n      console.warn(`unknown action`, action);\n      return {\n        ...state,\n      };\n  }\n}\n\nfunction onRegisterPageChange(\n  action: { type: MainActionType.REGISTRATION_PAGE_CHANGE, data: IApiRegisterUserData },\n  state: IMainState,\n): IMainState {\n  return {\n    ...state,\n    userRegisterEmail: action.data.email,\n    userRegisterName: action.data.name,\n    userRegisterPassword: action.data.password,\n  };\n}\n\nfunction onRestorePageChange(\n  action: { type: MainActionType.RESTORE_PAGE_CHANGE, email: string },\n  state: IMainState,\n): IMainState {\n  return {\n    ...state,\n    userRestoreEmail: action.email,\n  };\n}\n\nfunction onResetPageChange(\n  action: { type: MainActionType.RESET_PAGE_CHANGE, code: string, password: string },\n  state: IMainState,\n): IMainState {\n  return {\n    ...state,\n    userResetCode: action.code,\n    userResetPassword: action.password,\n  };\n}\n\nfunction onRegisterSuccess(\n  action: { type: MainActionType.REGISTRATION_USER_SUCCESS, data: IApiRegisterUserResponse, password: string },\n  state: IMainState,\n): IMainState {\n  return {\n    ...state,\n    isRegisterRequest: false,\n    isRegisterSuccess: true,\n    isRegisterFailed: false,\n    isAuthorized: true,\n    userEmail: action.data.user.email,\n    userName: action.data.user.name,\n    userPassword: action.password,\n  };\n}\n\nfunction onLoginSuccess(\n  action: { type: MainActionType.LOGIN_SUCCESS, data: IApiLoginResponse, password: string },\n  state: IMainState,\n): IMainState {\n  return {\n    ...state,\n    isLoginRequest: false,\n    isLoginSuccess: true,\n    isLoginFailed: false,\n    isAuthorized: true,\n    userEmail: action.data.user.email,\n    userName: action.data.user.name,\n    userPassword: action.password,\n  };\n}\n\nfunction onLoginPageChange(\n  action: { type: MainActionType.LOGIN_PAGE_CHANGE, data: IApiLoginData },\n  state: IMainState,\n): IMainState {\n  return {\n    ...state,\n    loginPageEmail: action.data.email,\n    loginPagePassword: action.data.password,\n  };\n}\n\nfunction onProfilePageLoad(\n  action: { type: MainActionType.PROFILE_SUCCESS, data: IApiProfileData },\n  state: IMainState,\n): IMainState {\n  return {\n    ...state,\n    isProfileSuccess: true,\n    isProfileRequest: false,\n    isProfileFail: false,\n    profileEmail: action.data.email,\n    profilePassword: action.data.password,\n    profileName: action.data.name,\n  };\n}\n\nfunction onProfilePageChange(\n  action: { type: MainActionType.PROFILE_PAGE_CHANGE, data: IApiProfileData },\n  state: IMainState,\n): IMainState {\n  return {\n    ...state,\n    profileEmail: action.data.email,\n    profilePassword: action.data.password,\n    profileName: action.data.name,\n  };\n}\n\nfunction onProfilePageReset(\n  action: { type: MainActionType.PROFILE_PAGE_RESET },\n  state: IMainState,\n): IMainState {\n  return {\n    ...state,\n    profileEmail: state.userEmail,\n    profilePassword: state.userPassword ?? '',\n    profileName: state.userName,\n  };\n}","import { IBurgerPart } from '../../model/IBurgerPart';\n\nexport interface IngredientsState {\n  isIngredientsRequest: boolean;\n  isIngredientsLoaded: boolean;\n  isIngredientsFailed: boolean;\n  ingredients: IBurgerPart[];\n}\n\nexport const InitialIngredientsState: IngredientsState = {\n  isIngredientsRequest: false,\n  isIngredientsFailed: false,\n  isIngredientsLoaded: false,\n  ingredients: [],\n}","import { IBurgerPart } from '../model/IBurgerPart';\n\nexport class IngredientStorage {\n  private static ingredients: IBurgerPart[] = [];\n\n  static save(ingredients: IBurgerPart[]) {\n    IngredientStorage.ingredients = ingredients;\n  }\n\n  static getIngredients(): IBurgerPart[] {\n    return IngredientStorage.ingredients;\n  }\n\n}","import { IngredientAction, IngredientActionType } from '../../actions';\nimport { IngredientsState, InitialIngredientsState } from './IngredientsState';\nimport { logg } from '../../utils/log';\nimport { IBurgerPart } from '../../model/IBurgerPart';\nimport { IngredientStorage } from '../../services/IngredientStorage';\n\nexport function ingredientsReducer(state: IngredientsState = InitialIngredientsState, action: IngredientAction): IngredientsState {\n  switch (action.type) {\n    case IngredientActionType.DATA_REQUEST: {\n      return {\n        ...state,\n        isIngredientsRequest: true,\n      };\n    }\n    case IngredientActionType.DATA_FAILED : {\n      return {\n        ...state,\n        isIngredientsRequest: false,\n        isIngredientsLoaded: false,\n        isIngredientsFailed: true,\n      };\n    }\n    case IngredientActionType.DATA_LOADED:\n      return onDataLoad(state, action);\n    default:\n      logg(`ingredientsReducer unknown action`, action);\n      return {\n        ...state,\n      };\n  }\n}\n\nfunction onDataLoad(\n  state: IngredientsState,\n  action: { type: IngredientActionType.DATA_LOADED; ingredients: IBurgerPart[] },\n): IngredientsState {\n\n  const ingredients = action.ingredients.map(i => ({\n    ...i,\n    amount: 0,\n  }));\n\n  IngredientStorage.save(ingredients); // for use in other reducers\n\n  return {\n    ...state,\n    ingredients,\n    isIngredientsLoaded: true,\n    isIngredientsRequest: false,\n  };\n}","import { IOrderFeedItem } from '../../model/IOrderFeedItem';\nimport { IConstructorElementData } from '../../model/IConstructorElementData';\nimport { IBurgerPart } from '../../model/IBurgerPart';\n\nexport interface IOrderState {\n  ingredientAmountMap: Record<string, number>;\n  sum: number;\n  selectedBun?: IConstructorElementData;\n  selectedParts: IConstructorElementData[];\n\n  selectedIngredient?: IBurgerPart;\n\n  // общая лента заказов\n  orderFeed: IOrderFeedItem[];\n  orderTotal: number;\n  orderToday: number;\n\n  isOrderRequest: boolean;\n  isOrderSuccess: boolean;\n  isOrderFailed: boolean;\n  orderMessage?: string;\n  isBadOrderMessage?: boolean;\n\n  showCreatedOrder?: IOrderFeedItem;\n  showedOrders: IOrderFeedItem[];\n}\n\nexport const InitialOrdersFeedState: IOrderState = {\n  sum: 0,\n  ingredientAmountMap: {},\n  selectedBun: undefined,\n  selectedParts: [],\n  orderFeed: [],\n  orderTotal: 0,\n  orderToday: 0,\n  isOrderRequest: false,\n  isOrderFailed: false,\n  isOrderSuccess: false,\n  showedOrders: [],\n};","import { nanoid } from 'nanoid';\nimport { IBurgerPart } from '../../model/IBurgerPart';\nimport { logg } from '../../utils/log';\nimport { OrderStatus } from '../../model/IOrderFeedItem';\nimport { IConstructorElementData } from '../../model/IConstructorElementData';\nimport { mapApiOrderData } from '../../converters/getBurgerParts';\nimport { IngredientStorage } from '../../services/IngredientStorage';\nimport { InitialOrdersFeedState, IOrderState } from './ordersState';\nimport { IRemovePayLoad, IWsOrderMessage, OrderAction, OrderActionActionType } from '../../actions/orders';\n\n\nexport function ordersReducer(state: IOrderState = InitialOrdersFeedState, action: OrderAction): IOrderState {\n  switch (action.type) {\n    case OrderActionActionType.ORDER_RESET:\n      return {\n        ...state,\n        isOrderRequest: false,\n        isOrderSuccess: false,\n        isOrderFailed: false,\n      };\n    case OrderActionActionType.ORDER_REQUEST:\n      return {\n        ...state,\n        isOrderRequest: true,\n        isOrderSuccess: false,\n        isOrderFailed: false,\n        orderMessage: 'Идет запрос к серверу...',\n        isBadOrderMessage: false,\n      };\n    case OrderActionActionType.ORDER_SUCCESS:\n      logg('ORDER_SUCCESS ', action);\n      return {\n        ...resetOrderBasket(state),\n        isOrderRequest: false,\n        isOrderSuccess: true,\n        isOrderFailed: false,\n        showCreatedOrder: action.payload,\n        orderMessage: 'Бургер успешно заказан',\n        isBadOrderMessage: false,\n      };\n    case OrderActionActionType.ORDER_FAILED:\n      return {\n        ...state,\n        isOrderRequest: false,\n        isOrderFailed: true,\n        isOrderSuccess: false,\n        orderMessage: 'Ошибка сервера, попробуйте повторить заказ...',\n        isBadOrderMessage: true,\n      };\n    case OrderActionActionType.ORDER_MESSAGE_RESET:\n      return {\n        ...state,\n        orderMessage: undefined,\n        isBadOrderMessage: false,\n      };\n    case OrderActionActionType.INGREDIENT_ADD_TO_BASKET:\n      return onSelectAction(action, state);\n    case OrderActionActionType.INGREDIENT_REMOVE_FROM_BASKET:\n      return onRemoveAction(action, state);\n    case OrderActionActionType.BASKET_ITEM_SWAP:\n      return onBasketItemSwap(action, state);\n    case OrderActionActionType.ORDERS_FEED_UPDATE:\n      return onWsOrderGetMessage(action, state);\n    case OrderActionActionType.ORDERED_POPUP_SHOW:\n      return {\n        ...state,\n        showCreatedOrder: undefined,\n        showedOrders: [...state.showedOrders, action.order],\n      };\n    default:\n      logg(`ordersFeedReducer unknown action`, action);\n      return {\n        ...state,\n      };\n  }\n}\n\nfunction onSelectAction(\n  action: { type: OrderActionActionType.INGREDIENT_ADD_TO_BASKET, ingredient: IBurgerPart },\n  state: IOrderState,\n): IOrderState {\n  const selectedIngredient = action.ingredient;\n  const isBun = selectedIngredient.type === 'bun';\n  const constructorItem = mapBurgerItem(selectedIngredient);\n\n  const selectedBun = isBun ? constructorItem : state.selectedBun;\n  const selectedParts = isBun\n    ? state.selectedParts\n    : [...state.selectedParts, constructorItem];\n\n  let sum = selectedParts.reduce((acc, next) => acc + next.price, 0);\n  if (selectedBun) sum += selectedBun.price * 2;\n\n  const ingredientAmountMap = updateAmounts(selectedParts, selectedBun);\n\n  return {\n    ...state,\n    ingredientAmountMap,\n    selectedBun,\n    selectedParts,\n    sum,\n  };\n}\n\nfunction onRemoveAction(\n  action: { type: OrderActionActionType.INGREDIENT_REMOVE_FROM_BASKET, payload: IRemovePayLoad },\n  state: IOrderState):\n  IOrderState {\n\n  const { selectedId } = action.payload;\n  const selectedParts = [...state.selectedParts.filter(p => p.selectedId !== selectedId)];\n  const { selectedBun } = state;\n  const bunSum = selectedBun === undefined ? 0 : selectedBun.price * 2;\n  const sum = bunSum + selectedParts.reduce((acc, next) => acc + next.price, 0);\n\n  const ingredientAmountMap = updateAmounts(selectedParts, selectedBun);\n\n  return {\n    ...state,\n    selectedParts,\n    ingredientAmountMap,\n    sum,\n  };\n}\n\nfunction updateAmounts(selectedParts: IConstructorElementData[], bun?: IConstructorElementData): Record<string, number> {\n  const amountMap: Record<string, number> = {};\n  if (bun) {\n    const ingredientId = bun.ingredientId;\n    amountMap[ingredientId] = 2;\n  }\n  selectedParts.forEach(({ ingredientId }) => {\n    if (amountMap[ingredientId] === undefined) amountMap[ingredientId] = 0;\n    amountMap[ingredientId]++;\n  });\n  return amountMap;\n}\n\n\nfunction mapBurgerItem(data: IBurgerPart): IConstructorElementData {\n  return setUniqueSelectorId({\n    ingredientId: data._id, price: data.price, text: data.name, thumbnail: data.image,\n    selectedId: data._id,\n  });\n}\n\nfunction setUniqueSelectorId(data: IConstructorElementData): IConstructorElementData {\n  return {\n    ...data,\n    selectedId: nanoid(),\n  };\n}\n\nfunction onBasketItemSwap(\n  action: { type: OrderActionActionType.BASKET_ITEM_SWAP, selectedId1: string, selectedId2: string },\n  state: IOrderState,\n): IOrderState {\n  const { selectedId1, selectedId2 } = action;\n  const { selectedParts } = state;\n  const results = selectedParts.slice();\n  const item1index = selectedParts.findIndex(item => item.selectedId === selectedId1);\n  const item2index = selectedParts.findIndex(item => item.selectedId === selectedId2);\n  if (item1index > -1 && item2index > -1) {\n    results[item2index] = selectedParts[item1index];\n    results[item1index] = selectedParts[item2index];\n  } else {\n    console.warn(`cannot find ${selectedId1}, ${selectedId2} in `, selectedParts);\n  }\n  return {\n    ...state,\n    selectedParts: results,\n  };\n}\n\n\n/**\n * Обнулить корзину\n */\nfunction resetOrderBasket(state: IOrderState): IOrderState {\n  return {\n    ...state,\n    ingredientAmountMap: {},\n    selectedParts: [],\n    selectedBun: undefined,\n  };\n}\n\nfunction onWsOrderGetMessage(\n  action: { type: OrderActionActionType.ORDERS_FEED_UPDATE, message: IWsOrderMessage },\n  state: IOrderState,\n):\n  IOrderState {\n\n  logg('WS_ORDER_GET_MESSAGE message', action);\n  const { success, orders, total: orderTotal, totalToday: orderToday } = action.message;\n\n  if (success) {\n    const ingredients = IngredientStorage.getIngredients();\n    const orderFeed = orders.map(order => mapApiOrderData(order, ingredients));\n\n    const showCreatedOrder = orderFeed.filter(order => order.status === OrderStatus.CREATED)[0];\n    logg('showCreatedOrder ', showCreatedOrder);\n\n    // если ордер можно показать - можно очистить корзину\n    const successState = showCreatedOrder ? resetOrderBasket(state) : state;\n\n    return {\n      ...successState,\n      orderFeed,\n      orderToday,\n      orderTotal,\n      showCreatedOrder,\n    };\n  } else {\n    return {\n      ...state,\n    };\n  }\n}","import { combineReducers } from 'redux';\n\nimport { IMainState, mainReducer } from './main';\nimport { ingredientsReducer, IngredientsState } from './ingredients';\nimport { IOrderState, ordersReducer } from './orders';\n\nexport type { IMainState } from './main';\n\nexport type { IngredientsState } from './ingredients';\n\nexport const rootReducer = combineReducers({\n  main: mainReducer,\n  ingredients: ingredientsReducer,\n  orders: ordersReducer,\n});\n\nexport interface IRootState {\n  main: IMainState;\n  ingredients: IngredientsState;\n  orders: IOrderState;\n}","import { OrderActionActionType } from '../actions';\nimport { logg } from '../utils/log';\n\n\nexport interface IWSActions extends Record<string, OrderActionActionType> {\n  wsInit: OrderActionActionType;\n  wsSendMessage: OrderActionActionType;\n  wsClose: OrderActionActionType;\n  onOpen: OrderActionActionType;\n  onClose: OrderActionActionType;\n  onError: OrderActionActionType;\n  onMessage: OrderActionActionType;\n}\n\nexport const socketMiddleWare = (wsUrl: string, wsActions: IWSActions) => {\n  return (store: any) => {\n    let socket: WebSocket;\n\n    const { wsInit, wsClose, wsSendMessage, onMessage, onClose, onError, onOpen } = wsActions;\n\n    return (next: any) => (action: any) => {\n      const { dispatch } = store;\n      const { type } = action;\n\n      if (type === wsInit) {\n        const url = `${wsUrl}?token=${action.token}`;\n        socket = new WebSocket(url);\n\n        // close socket\n        window.onbeforeunload = function() {\n          socket.onclose = function () {};\n          socket.close();\n        };\n      }\n      if (socket) {\n\n        if (type === wsClose) {\n          logg(' socket.close by client', action);\n          socket.close();\n        }\n\n        socket.onopen = event => {\n          logg(' socket.onopen', event);\n          dispatch({ type: onOpen, payload: event });\n        };\n\n        socket.onerror = event => {\n          logg(' socket.onerror', event);\n          dispatch({ type: onError, error: event });\n        };\n\n        socket.onmessage = event => {\n          logg(' socket.onmessage', event);\n          const { data } = event;\n          const message = JSON.parse(data);\n          logg('socket message', message);\n          dispatch({ type: onMessage, message });\n        };\n        socket.onclose = event => {\n          dispatch({ type: onClose, event });\n        };\n\n        if (type === wsSendMessage) {\n          logg(' socket.wsSendMessage', action);\n          const message = action.message;\n          socket.send(JSON.stringify(message));\n        }\n      }\n\n      next(action);\n    };\n  };\n};","import { Action, ActionCreator, applyMiddleware, compose, createStore } from 'redux';\nimport thunk, { ThunkAction, ThunkMiddleware } from 'redux-thunk';\nimport { IMainState, IngredientsState, IRootState, rootReducer } from './reducers';\nimport { IngredientAction, MainAction, OrderAction, OrderActionActionType } from './actions';\nimport { IWSActions, socketMiddleWare } from './middleware/socketMiddleWare';\nimport { IOrderState } from './reducers/orders';\n\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n  }\n}\n\nconst WS_ORDER_URL = 'wss://norma.nomoreparties.space/orders/all';\nconst wsActions: IWSActions = {\n  wsInit: OrderActionActionType.WS_ORDER_CONNECTION_START,\n  wsClose: OrderActionActionType.WS_ORDER_CONNECTION_CLOSE,\n  onOpen: OrderActionActionType.WS_ORDER_CONNECTION_SUCCESS,\n  onError: OrderActionActionType.WS_ORDER_CONNECTION_ERROR,\n  onMessage: OrderActionActionType.ORDERS_FEED_UPDATE,\n  wsSendMessage: OrderActionActionType.WS_ORDER_SEND_MESSAGE,\n  onClose: OrderActionActionType.WS_ORDER_CONNECTION_CLOSED,\n};\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\ntype AppAction = MainAction | OrderAction | IngredientAction;\ntype AppState = IMainState | IOrderState | IngredientsState;\n\n\nexport const AppStore = createStore(\n  rootReducer,\n  composeEnhancers(\n    applyMiddleware(\n      thunk,\n      socketMiddleWare(WS_ORDER_URL, wsActions),\n    ),\n  ));\n\n\nexport type RootState = ReturnType<typeof AppStore.getState>\nexport type AppDispatch = typeof AppStore.dispatch;\n\n\nexport type AppThunk<TReturn = void> = ActionCreator<\n  ThunkAction<TReturn, Action, RootState, AppAction>\n  >;\n\nexport interface IGetState {\n  (): IRootState;\n}","import React from 'react';\nimport { Provider } from 'react-redux';\nimport ReactDOM from 'react-dom';\n\nimport reportWebVitals from './reportWebVitals';\nimport App from './components/app/app';\nimport './index.css';\nimport { AppStore } from './services/store';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={AppStore}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\nexport { API } from './services/services/ApiService';","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"profile_content__3vLfG\",\"col_left\":\"profile_col_left__21FJd\",\"col_right\":\"profile_col_right__2JaKD\",\"links\":\"profile_links__3QviD\",\"link\":\"profile_link__1-1p8\",\"link_profile\":\"profile_link_profile__21jV8\",\"active\":\"profile_active__187xt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-feed-details-part-list_main__2DAHo\",\"scrollable\":\"order-feed-details-part-list_scrollable__1Wj0_\",\"row\":\"order-feed-details-part-list_row__iHOgY\",\"rowPart\":\"order-feed-details-part-list_rowPart__2P0zr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1iHLW\",\"col\":\"app-header_col__3xeLd\",\"link\":\"app-header_link__2y8TU\",\"left\":\"app-header_left__3QKON app-header_col__3xeLd\",\"center\":\"app-header_center__3YkdO app-header_col__3xeLd\",\"right\":\"app-header_right__A7Lg9 app-header_col__3xeLd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile-editor_main__3AWf1\",\"buttons\":\"profile-editor_buttons__2BEO1\",\"hidden\":\"profile-editor_hidden__2XaGR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"centerWrap\":\"order-feed-item-part_centerWrap__27Pb2\",\"centered\":\"order-feed-item-part_centered__1uM23\",\"circle\":\"order-feed-item-part_circle__3QU9T order-feed-item-part_centerWrap__27Pb2\",\"overlap\":\"order-feed-item-part_overlap__1Eb3L\",\"img\":\"order-feed-item-part_img__UCKB0 order-feed-item-part_centered__1uM23\",\"text\":\"order-feed-item-part_text__3aFNl order-feed-item-part_centered__1uM23\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"forgot-password_wrap__3WyMA\",\"content\":\"forgot-password_content__dCYfM\",\"about\":\"forgot-password_about__3Cb0i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"login_wrap__2-2Es\",\"content\":\"login_content__28Q5n\",\"about\":\"login_about__fGcG-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"register_wrap__2Vx-t\",\"content\":\"register_content__3FBxM\",\"about\":\"register_about__3AoHB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"reset-password_wrap__3mD0h\",\"content\":\"reset-password_content__2O_HY\",\"about\":\"reset-password_about__2iIaW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-feed-page_main__2rjRp\",\"columns\":\"order-feed-page_columns__3v7WP\",\"colLeft\":\"order-feed-page_colLeft__Nx_Ep\",\"colRight\":\"order-feed-page_colRight__23zch\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-feed-details_main__9V1X0\",\"content\":\"order-feed-details_content__3AdD_\",\"center\":\"order-feed-details_center__1nL7x\",\"row\":\"order-feed-details_row__5WpuF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"window\":\"modal_window__3xxdZ\",\"head\":\"modal_head__195Dg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ingredient-details_content__1h36_\",\"image_wrapper\":\"ingredient-details_image_wrapper__leucM\",\"nutrition\":\"ingredient-details_nutrition__15aLk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"main_content__2NOVK\",\"col\":\"main_col__1DWTk\",\"col_left\":\"main_col_left__1Ng_2 main_col__1DWTk\",\"col_right\":\"main_col_right__MeRw4 main_col__1DWTk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"burger-ingredients-item_item__2unsw\",\"image\":\"burger-ingredients-item_image__GfIe0\",\"name\":\"burger-ingredients-item_name__UxOAX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"money-counter_main__1m0GZ\",\"icon\":\"money-counter_icon__2Dowa\",\"big_icon\":\"money-counter_big_icon__1ocKv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"burger-constructor_main__O9C0W\",\"list\":\"burger-constructor_list__2lXaw\",\"sum\":\"burger-constructor_sum__487I2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"loading_wrap__t_n18\",\"content\":\"loading_content__3UCR8\",\"alert\":\"loading_alert__2-PpT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-feed-item_main__16JP2\",\"rowName\":\"order-feed-item_rowName__1pGWR\",\"row\":\"order-feed-item_row__Jow4J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-feed-info_main__30PdP\",\"columns\":\"order-feed-info_columns__333R8\",\"normal\":\"order-feed-info_normal__2qsC5\",\"success\":\"order-feed-info_success__1_Yh4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"app-header-item_item__O-kHK\",\"active\":\"app-header-item_active__2-Mjm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"order-details_content__ABFXc\",\"done\":\"order-details_done__2B7O6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"burger-ingredients_main__1liZB\",\"list\":\"burger-ingredients_list__HZyi9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"burger-ingredients-section_section__1ZvEw\",\"list\":\"burger-ingredients-section_list__1ctQA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-feed-item-parts_main__2VlVB\",\"row\":\"order-feed-item-parts_row__1AX74\"};"],"sourceRoot":""}